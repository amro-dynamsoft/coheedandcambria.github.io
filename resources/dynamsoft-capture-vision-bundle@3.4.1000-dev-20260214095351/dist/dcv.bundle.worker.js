/*!
* Dynamsoft JavaScript Library
* @product Dynamsoft Capture Vision JS Edition Bundle
* @website http://www.dynamsoft.com
* @copyright Copyright 2026, Dynamsoft Corporation
* @author Dynamsoft
* @version 3.4.1000-dev-20260214095351
* @fileoverview Dynamsoft JavaScript Library for Capture Vision
* More info on DCV JS: https://www.dynamsoft.com/capture-vision/docs/web/programming/javascript/
*/
!function(){"use strict";function e(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{_(n.next(e))}catch(e){s(e)}}function a(e){try{_(n.throw(e))}catch(e){s(e)}}function _(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}_((n=n.apply(e,t||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const t=e=>e&&"object"==typeof e&&"function"==typeof e.then,r=(async()=>{})().constructor;class n extends r{get status(){return this._s}get isPending(){return"pending"===this._s}get isFulfilled(){return"fulfilled"===this._s}get isRejected(){return"rejected"===this._s}get task(){return this._task}set task(e){let n;this._task=e,t(e)?n=e:"function"==typeof e&&(n=new r(e)),n&&(async()=>{try{const t=await n;e===this._task&&this.resolve(t)}catch(t){e===this._task&&this.reject(t)}})()}get isEmpty(){return null==this._task}constructor(e){let r,n;super((e,t)=>{r=e,n=t}),this._s="pending",this.resolve=e=>{this.isPending&&(t(e)?this.task=e:(this._s="fulfilled",r(e)))},this.reject=e=>{this.isPending&&(this._s="rejected",n(e))},this.task=e}}const i=e=>e&&"object"==typeof e&&"function"==typeof e.then,s=(async()=>{})().constructor;class o extends s{get status(){return this._s}get isPending(){return"pending"===this._s}get isFulfilled(){return"fulfilled"===this._s}get isRejected(){return"rejected"===this._s}get task(){return this._task}set task(e){let t;this._task=e,i(e)?t=e:"function"==typeof e&&(t=new s(e)),t&&(async()=>{try{const r=await t;e===this._task&&this.resolve(r)}catch(t){e===this._task&&this.reject(t)}})()}get isEmpty(){return null==this._task}constructor(e){let t,r;super((e,n)=>{t=e,r=n}),this._s="pending",this.resolve=e=>{this.isPending&&(i(e)?this.task=e:(this._s="fulfilled",t(e)))},this.reject=e=>{this.isPending&&(this._s="rejected",r(e))},this.task=e}}var a,_,c;"function"==typeof SuppressedError&&SuppressedError,function(e){e[e.BOPM_BLOCK=0]="BOPM_BLOCK",e[e.BOPM_UPDATE=1]="BOPM_UPDATE"}(a||(a={})),function(e){e[e.CCUT_AUTO=0]="CCUT_AUTO",e[e.CCUT_FULL_CHANNEL=1]="CCUT_FULL_CHANNEL",e[e.CCUT_Y_CHANNEL_ONLY=2]="CCUT_Y_CHANNEL_ONLY",e[e.CCUT_RGB_R_CHANNEL_ONLY=3]="CCUT_RGB_R_CHANNEL_ONLY",e[e.CCUT_RGB_G_CHANNEL_ONLY=4]="CCUT_RGB_G_CHANNEL_ONLY",e[e.CCUT_RGB_B_CHANNEL_ONLY=5]="CCUT_RGB_B_CHANNEL_ONLY"}(_||(_={})),function(e){e[e.IPF_BINARY=0]="IPF_BINARY",e[e.IPF_BINARYINVERTED=1]="IPF_BINARYINVERTED",e[e.IPF_GRAYSCALED=2]="IPF_GRAYSCALED",e[e.IPF_NV21=3]="IPF_NV21",e[e.IPF_RGB_565=4]="IPF_RGB_565",e[e.IPF_RGB_555=5]="IPF_RGB_555",e[e.IPF_RGB_888=6]="IPF_RGB_888",e[e.IPF_ARGB_8888=7]="IPF_ARGB_8888",e[e.IPF_RGB_161616=8]="IPF_RGB_161616",e[e.IPF_ARGB_16161616=9]="IPF_ARGB_16161616",e[e.IPF_ABGR_8888=10]="IPF_ABGR_8888",e[e.IPF_ABGR_16161616=11]="IPF_ABGR_16161616",e[e.IPF_BGR_888=12]="IPF_BGR_888",e[e.IPF_BINARY_8=13]="IPF_BINARY_8",e[e.IPF_NV12=14]="IPF_NV12",e[e.IPF_BINARY_8_INVERTED=15]="IPF_BINARY_8_INVERTED"}(c||(c={}));const d="undefined"==typeof self,l="function"==typeof importScripts,E=(()=>{if(!l){if(!d&&document.currentScript){let e=document.currentScript.src,t=e.indexOf("?");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"}})(),u=e=>{if(null==e&&(e="./"),d||l);else{let t=document.createElement("a");t.href=e,e=t.href}return e.endsWith("/")||(e+="/"),e},f=e=>"number"==typeof e&&!Number.isNaN(e),m=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),I=(e,t)=>"bytes"===e&&"object"==typeof t&&"number"==typeof t.ptr&&"number"==typeof t.length,p=e=>!(!(e=>!(!m(e)||!f(e.width)||e.width<=0||!f(e.height)||e.height<=0||!f(e.stride)||e.stride<=0||!("format"in e)||"tag"in e&&!C(e.tag)))(e)||!f(e.bytes.length)&&!f(e.bytes.ptr)),C=e=>null===e||!!m(e)&&!!f(e.imageId)&&"type"in e,g=async(e,t,r)=>await new Promise((n,i)=>{let s=new XMLHttpRequest;s.responseType=t,s.onloadstart=()=>{r&&r.loadstartCallback&&r.loadstartCallback()},s.onloadend=async e=>{r&&r.loadendCallback&&r.loadendCallback(),s.status<200||s.status>=300?i(s.status):n(s.response)},s.onprogress=e=>{r&&r.progressCallback&&r.progressCallback(e)},s.onerror=e=>{i(e)},s.open("GET",e,!0),s.send()}),T=(e,t)=>{let r=e.split("."),n=t.split(".");for(let e=0;e<r.length&&e<n.length;++e){let t=r[e],i=n[e];if(t===i)continue;let s=parseInt(r[e]),o=parseInt(n[e]);return s===o||Number.isNaN(s)&&Number.isNaN(o)?t<i?-1:1:s<o||Number.isNaN(s)&&Number.isInteger(o)?-1:1}return r.length===n.length?0:r.length<n.length?-1:1},y={std:"dynamsoft-capture-vision-std",dip:"dynamsoft-image-processing",core:"dynamsoft-core",dnn:"dynamsoft-capture-vision-dnn",license:"dynamsoft-license",utility:"dynamsoft-utility",cvr:"dynamsoft-capture-vision-router",dbr:"dynamsoft-barcode-reader",dlr:"dynamsoft-label-recognizer",ddn:"dynamsoft-document-normalizer",dcp:"dynamsoft-code-parser",dcvData:"dynamsoft-capture-vision-data",dce:"dynamsoft-camera-enhancer",identityutility:"dynamsoft-identity-utility",ddv:"dynamsoft-document-viewer",dwt:"dwt",dbrBundle:"dynamsoft-barcode-reader-bundle",dcvBundle:"dynamsoft-capture-vision-bundle"};let h,v,N,R,O;"undefined"!=typeof navigator&&(h=navigator,v=h.userAgent,N=h.platform,R=h.mediaDevices),function(){if(!d){const e={Edge:{search:"Edg",verSearch:"Edg"},OPR:null,Chrome:null,Safari:{str:h.vendor,search:"Apple",verSearch:["Version","iPhone OS","CPU OS"]},Firefox:null,Explorer:{search:"MSIE",verSearch:"MSIE"}},t={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:N,search:"Win"},Mac:{str:N},Linux:{str:N}};let r="unknownBrowser",n=0,i="unknownOS";for(let t in e){const i=e[t]||{};let s=i.str||v,o=i.search||t,a=i.verStr||v,_=i.verSearch||t;if(_ instanceof Array||(_=[_]),-1!=s.indexOf(o)){r=t;for(let e of _){let t=a.indexOf(e);if(-1!=t){n=parseFloat(a.substring(t+e.length+1));break}}break}}for(let e in t){const r=t[e]||{};let n=r.str||v,s=r.search||e;if(-1!=n.indexOf(s)){i=e;break}}"Linux"==i&&-1!=v.indexOf("Windows NT")&&(i="HarmonyOS"),O={browser:r,version:n,OS:i}}d&&(O={browser:"ssr",version:0,OS:"ssr"})}();const S="undefined"!=typeof WebAssembly&&v&&!(/Safari/.test(v)&&!/Chrome/.test(v)&&/\(.+\s11_2_([2-6]).*\)/.test(v)),D=!("undefined"==typeof Worker),b=!(!R||!R.getUserMedia),A=async()=>{let e=!1;if(b)try{(await R.getUserMedia({video:!0})).getTracks().forEach(e=>{e.stop()}),e=!0}catch(e){}return e};var L,M,w,P,U,F,B,G,k;"Chrome"===O.browser&&O.version>66||"Safari"===O.browser&&O.version>13||"OPR"===O.browser&&O.version>43||"Edge"===O.browser&&O.version,function(e){e[e.CRIT_ORIGINAL_IMAGE=1]="CRIT_ORIGINAL_IMAGE",e[e.CRIT_BARCODE=2]="CRIT_BARCODE",e[e.CRIT_TEXT_LINE=4]="CRIT_TEXT_LINE",e[e.CRIT_DETECTED_QUAD=8]="CRIT_DETECTED_QUAD",e[e.CRIT_DESKEWED_IMAGE=16]="CRIT_DESKEWED_IMAGE",e[e.CRIT_PARSED_RESULT=32]="CRIT_PARSED_RESULT",e[e.CRIT_ENHANCED_IMAGE=64]="CRIT_ENHANCED_IMAGE"}(L||(L={})),function(e){e[e.CT_NORMAL_INTERSECTED=0]="CT_NORMAL_INTERSECTED",e[e.CT_T_INTERSECTED=1]="CT_T_INTERSECTED",e[e.CT_CROSS_INTERSECTED=2]="CT_CROSS_INTERSECTED",e[e.CT_NOT_INTERSECTED=3]="CT_NOT_INTERSECTED"}(M||(M={})),function(e){e[e.EC_OK=0]="EC_OK",e[e.EC_UNKNOWN=-1e4]="EC_UNKNOWN",e[e.EC_NO_MEMORY=-10001]="EC_NO_MEMORY",e[e.EC_NULL_POINTER=-10002]="EC_NULL_POINTER",e[e.EC_LICENSE_INVALID=-10003]="EC_LICENSE_INVALID",e[e.EC_LICENSE_EXPIRED=-10004]="EC_LICENSE_EXPIRED",e[e.EC_FILE_NOT_FOUND=-10005]="EC_FILE_NOT_FOUND",e[e.EC_FILE_TYPE_NOT_SUPPORTED=-10006]="EC_FILE_TYPE_NOT_SUPPORTED",e[e.EC_BPP_NOT_SUPPORTED=-10007]="EC_BPP_NOT_SUPPORTED",e[e.EC_INDEX_INVALID=-10008]="EC_INDEX_INVALID",e[e.EC_CUSTOM_REGION_INVALID=-10010]="EC_CUSTOM_REGION_INVALID",e[e.EC_IMAGE_READ_FAILED=-10012]="EC_IMAGE_READ_FAILED",e[e.EC_TIFF_READ_FAILED=-10013]="EC_TIFF_READ_FAILED",e[e.EC_DIB_BUFFER_INVALID=-10018]="EC_DIB_BUFFER_INVALID",e[e.EC_PDF_READ_FAILED=-10021]="EC_PDF_READ_FAILED",e[e.EC_PDF_DLL_MISSING=-10022]="EC_PDF_DLL_MISSING",e[e.EC_PAGE_NUMBER_INVALID=-10023]="EC_PAGE_NUMBER_INVALID",e[e.EC_CUSTOM_SIZE_INVALID=-10024]="EC_CUSTOM_SIZE_INVALID",e[e.EC_TIMEOUT=-10026]="EC_TIMEOUT",e[e.EC_JSON_PARSE_FAILED=-10030]="EC_JSON_PARSE_FAILED",e[e.EC_JSON_TYPE_INVALID=-10031]="EC_JSON_TYPE_INVALID",e[e.EC_JSON_KEY_INVALID=-10032]="EC_JSON_KEY_INVALID",e[e.EC_JSON_VALUE_INVALID=-10033]="EC_JSON_VALUE_INVALID",e[e.EC_JSON_NAME_KEY_MISSING=-10034]="EC_JSON_NAME_KEY_MISSING",e[e.EC_JSON_NAME_VALUE_DUPLICATED=-10035]="EC_JSON_NAME_VALUE_DUPLICATED",e[e.EC_TEMPLATE_NAME_INVALID=-10036]="EC_TEMPLATE_NAME_INVALID",e[e.EC_JSON_NAME_REFERENCE_INVALID=-10037]="EC_JSON_NAME_REFERENCE_INVALID",e[e.EC_PARAMETER_VALUE_INVALID=-10038]="EC_PARAMETER_VALUE_INVALID",e[e.EC_DOMAIN_NOT_MATCH=-10039]="EC_DOMAIN_NOT_MATCH",e[e.EC_LICENSE_KEY_NOT_MATCH=-10043]="EC_LICENSE_KEY_NOT_MATCH",e[e.EC_SET_MODE_ARGUMENT_ERROR=-10051]="EC_SET_MODE_ARGUMENT_ERROR",e[e.EC_GET_MODE_ARGUMENT_ERROR=-10055]="EC_GET_MODE_ARGUMENT_ERROR",e[e.EC_IRT_LICENSE_INVALID=-10056]="EC_IRT_LICENSE_INVALID",e[e.EC_FILE_SAVE_FAILED=-10058]="EC_FILE_SAVE_FAILED",e[e.EC_STAGE_TYPE_INVALID=-10059]="EC_STAGE_TYPE_INVALID",e[e.EC_IMAGE_ORIENTATION_INVALID=-10060]="EC_IMAGE_ORIENTATION_INVALID",e[e.EC_CONVERT_COMPLEX_TEMPLATE_ERROR=-10061]="EC_CONVERT_COMPLEX_TEMPLATE_ERROR",e[e.EC_CALL_REJECTED_WHEN_CAPTURING=-10062]="EC_CALL_REJECTED_WHEN_CAPTURING",e[e.EC_NO_IMAGE_SOURCE=-10063]="EC_NO_IMAGE_SOURCE",e[e.EC_READ_DIRECTORY_FAILED=-10064]="EC_READ_DIRECTORY_FAILED",e[e.EC_MODULE_NOT_FOUND=-10065]="EC_MODULE_NOT_FOUND",e[e.EC_MULTI_PAGES_NOT_SUPPORTED=-10066]="EC_MULTI_PAGES_NOT_SUPPORTED",e[e.EC_FILE_ALREADY_EXISTS=-10067]="EC_FILE_ALREADY_EXISTS",e[e.EC_CREATE_FILE_FAILED=-10068]="EC_CREATE_FILE_FAILED",e[e.EC_IMAGE_DATA_INVALID=-10069]="EC_IMAGE_DATA_INVALID",e[e.EC_IMAGE_SIZE_NOT_MATCH=-10070]="EC_IMAGE_SIZE_NOT_MATCH",e[e.EC_IMAGE_PIXEL_FORMAT_NOT_MATCH=-10071]="EC_IMAGE_PIXEL_FORMAT_NOT_MATCH",e[e.EC_SECTION_LEVEL_RESULT_IRREPLACEABLE=-10072]="EC_SECTION_LEVEL_RESULT_IRREPLACEABLE",e[e.EC_AXIS_DEFINITION_INCORRECT=-10073]="EC_AXIS_DEFINITION_INCORRECT",e[e.EC_RESULT_TYPE_MISMATCH_IRREPLACEABLE=-10074]="EC_RESULT_TYPE_MISMATCH_IRREPLACEABLE",e[e.EC_PDF_LIBRARY_LOAD_FAILED=-10075]="EC_PDF_LIBRARY_LOAD_FAILED",e[e.EC_UNSUPPORTED_JSON_KEY_WARNING=-10077]="EC_UNSUPPORTED_JSON_KEY_WARNING",e[e.EC_MODEL_FILE_NOT_FOUND=-10078]="EC_MODEL_FILE_NOT_FOUND",e[e.EC_PDF_LICENSE_NOT_FOUND=-10079]="EC_PDF_LICENSE_NOT_FOUND",e[e.EC_RECT_INVALID=-10080]="EC_RECT_INVALID",e[e.EC_TEMPLATE_VERSION_INCOMPATIBLE=-10081]="EC_TEMPLATE_VERSION_INCOMPATIBLE",e[e.EC_PORTRAIT_ZONE_NOT_FOUND=-10082]="EC_PORTRAIT_ZONE_NOT_FOUND",e[e.EC_NO_LICENSE=-2e4]="EC_NO_LICENSE",e[e.EC_LICENSE_BUFFER_FAILED=-20002]="EC_LICENSE_BUFFER_FAILED",e[e.EC_LICENSE_SYNC_FAILED=-20003]="EC_LICENSE_SYNC_FAILED",e[e.EC_DEVICE_NOT_MATCH=-20004]="EC_DEVICE_NOT_MATCH",e[e.EC_BIND_DEVICE_FAILED=-20005]="EC_BIND_DEVICE_FAILED",e[e.EC_INSTANCE_COUNT_OVER_LIMIT=-20008]="EC_INSTANCE_COUNT_OVER_LIMIT",e[e.EC_TRIAL_LICENSE=-20010]="EC_TRIAL_LICENSE",e[e.EC_LICENSE_VERSION_NOT_MATCH=-20011]="EC_LICENSE_VERSION_NOT_MATCH",e[e.EC_LICENSE_CACHE_USED=-20012]="EC_LICENSE_CACHE_USED",e[e.EC_LICENSE_AUTH_QUOTA_EXCEEDED=-20013]="EC_LICENSE_AUTH_QUOTA_EXCEEDED",e[e.EC_LICENSE_RESULTS_LIMIT_EXCEEDED=-20014]="EC_LICENSE_RESULTS_LIMIT_EXCEEDED",e[e.EC_BARCODE_FORMAT_INVALID=-30009]="EC_BARCODE_FORMAT_INVALID",e[e.EC_CUSTOM_MODULESIZE_INVALID=-30025]="EC_CUSTOM_MODULESIZE_INVALID",e[e.EC_TEXT_LINE_GROUP_LAYOUT_CONFLICT=-40101]="EC_TEXT_LINE_GROUP_LAYOUT_CONFLICT",e[e.EC_TEXT_LINE_GROUP_REGEX_CONFLICT=-40102]="EC_TEXT_LINE_GROUP_REGEX_CONFLICT",e[e.EC_QUADRILATERAL_INVALID=-50057]="EC_QUADRILATERAL_INVALID",e[e.EC_PANORAMA_LICENSE_INVALID=-70060]="EC_PANORAMA_LICENSE_INVALID",e[e.EC_RESOURCE_PATH_NOT_EXIST=-90001]="EC_RESOURCE_PATH_NOT_EXIST",e[e.EC_RESOURCE_LOAD_FAILED=-90002]="EC_RESOURCE_LOAD_FAILED",e[e.EC_CODE_SPECIFICATION_NOT_FOUND=-90003]="EC_CODE_SPECIFICATION_NOT_FOUND",e[e.EC_FULL_CODE_EMPTY=-90004]="EC_FULL_CODE_EMPTY",e[e.EC_FULL_CODE_PREPROCESS_FAILED=-90005]="EC_FULL_CODE_PREPROCESS_FAILED",e[e.EC_LICENSE_WARNING=-10076]="EC_LICENSE_WARNING",e[e.EC_BARCODE_READER_LICENSE_NOT_FOUND=-30063]="EC_BARCODE_READER_LICENSE_NOT_FOUND",e[e.EC_LABEL_RECOGNIZER_LICENSE_NOT_FOUND=-40103]="EC_LABEL_RECOGNIZER_LICENSE_NOT_FOUND",e[e.EC_DOCUMENT_NORMALIZER_LICENSE_NOT_FOUND=-50058]="EC_DOCUMENT_NORMALIZER_LICENSE_NOT_FOUND",e[e.EC_CODE_PARSER_LICENSE_NOT_FOUND=-90012]="EC_CODE_PARSER_LICENSE_NOT_FOUND"}(w||(w={})),function(e){e[e.GEM_SKIP=0]="GEM_SKIP",e[e.GEM_AUTO=1]="GEM_AUTO",e[e.GEM_GENERAL=2]="GEM_GENERAL",e[e.GEM_GRAY_EQUALIZE=4]="GEM_GRAY_EQUALIZE",e[e.GEM_GRAY_SMOOTH=8]="GEM_GRAY_SMOOTH",e[e.GEM_SHARPEN_SMOOTH=16]="GEM_SHARPEN_SMOOTH",e[e.GEM_REV=-2147483648]="GEM_REV",e[e.GEM_END=-1]="GEM_END"}(P||(P={})),function(e){e[e.GTM_SKIP=0]="GTM_SKIP",e[e.GTM_INVERTED=1]="GTM_INVERTED",e[e.GTM_ORIGINAL=2]="GTM_ORIGINAL",e[e.GTM_AUTO=4]="GTM_AUTO",e[e.GTM_REV=-2147483648]="GTM_REV",e[e.GTM_END=-1]="GTM_END"}(U||(U={})),function(e){e[e.ITT_FILE_IMAGE=0]="ITT_FILE_IMAGE",e[e.ITT_VIDEO_FRAME=1]="ITT_VIDEO_FRAME"}(F||(F={})),function(e){e[e.PDFRM_VECTOR=1]="PDFRM_VECTOR",e[e.PDFRM_RASTER=2]="PDFRM_RASTER",e[e.PDFRM_REV=-2147483648]="PDFRM_REV"}(B||(B={})),function(e){e[e.RDS_RASTERIZED_PAGES=0]="RDS_RASTERIZED_PAGES",e[e.RDS_EXTRACTED_IMAGES=1]="RDS_EXTRACTED_IMAGES"}(G||(G={})),function(e){e[e.CVS_NOT_VERIFIED=0]="CVS_NOT_VERIFIED",e[e.CVS_PASSED=1]="CVS_PASSED",e[e.CVS_FAILED=2]="CVS_FAILED"}(k||(k={}));const x={IRUT_NULL:BigInt(0),IRUT_COLOUR_IMAGE:BigInt(1),IRUT_SCALED_COLOUR_IMAGE:BigInt(2),IRUT_GRAYSCALE_IMAGE:BigInt(4),IRUT_TRANSOFORMED_GRAYSCALE_IMAGE:BigInt(8),IRUT_ENHANCED_GRAYSCALE_IMAGE:BigInt(16),IRUT_PREDETECTED_REGIONS:BigInt(32),IRUT_BINARY_IMAGE:BigInt(64),IRUT_TEXTURE_DETECTION_RESULT:BigInt(128),IRUT_TEXTURE_REMOVED_GRAYSCALE_IMAGE:BigInt(256),IRUT_TEXTURE_REMOVED_BINARY_IMAGE:BigInt(512),IRUT_CONTOURS:BigInt(1024),IRUT_LINE_SEGMENTS:BigInt(2048),IRUT_TEXT_ZONES:BigInt(4096),IRUT_TEXT_REMOVED_BINARY_IMAGE:BigInt(8192),IRUT_CANDIDATE_BARCODE_ZONES:BigInt(16384),IRUT_LOCALIZED_BARCODES:BigInt(32768),IRUT_SCALED_BARCODE_IMAGE:BigInt(65536),IRUT_DEFORMATION_RESISTED_BARCODE_IMAGE:BigInt(1<<17),IRUT_COMPLEMENTED_BARCODE_IMAGE:BigInt(1<<18),IRUT_DECODED_BARCODES:BigInt(1<<19),IRUT_LONG_LINES:BigInt(1<<20),IRUT_CORNERS:BigInt(1<<21),IRUT_CANDIDATE_QUAD_EDGES:BigInt(1<<22),IRUT_DETECTED_QUADS:BigInt(1<<23),IRUT_LOCALIZED_TEXT_LINES:BigInt(1<<24),IRUT_RECOGNIZED_TEXT_LINES:BigInt(1<<25),IRUT_DESKEWED_IMAGE:BigInt(1<<26),IRUT_SHORT_LINES:BigInt(1<<27),IRUT_RAW_TEXT_LINES:BigInt(1<<28),IRUT_LOGIC_LINES:BigInt(1<<29),IRUT_ENHANCED_IMAGE:BigInt(Math.pow(2,30)),IRUT_ALL:BigInt("0xFFFFFFFFFFFFFFFF")};var W,V,H,j,Y;!function(e){e[e.ROET_PREDETECTED_REGION=0]="ROET_PREDETECTED_REGION",e[e.ROET_LOCALIZED_BARCODE=1]="ROET_LOCALIZED_BARCODE",e[e.ROET_DECODED_BARCODE=2]="ROET_DECODED_BARCODE",e[e.ROET_LOCALIZED_TEXT_LINE=3]="ROET_LOCALIZED_TEXT_LINE",e[e.ROET_RECOGNIZED_TEXT_LINE=4]="ROET_RECOGNIZED_TEXT_LINE",e[e.ROET_DETECTED_QUAD=5]="ROET_DETECTED_QUAD",e[e.ROET_DESKEWED_IMAGE=6]="ROET_DESKEWED_IMAGE",e[e.ROET_SOURCE_IMAGE=7]="ROET_SOURCE_IMAGE",e[e.ROET_TARGET_ROI=8]="ROET_TARGET_ROI",e[e.ROET_ENHANCED_IMAGE=9]="ROET_ENHANCED_IMAGE",e[e.ROET_AUXILIARY_REGION=10]="ROET_AUXILIARY_REGION"}(W||(W={})),function(e){e[e.ST_NULL=0]="ST_NULL",e[e.ST_REGION_PREDETECTION=1]="ST_REGION_PREDETECTION",e[e.ST_BARCODE_LOCALIZATION=2]="ST_BARCODE_LOCALIZATION",e[e.ST_BARCODE_DECODING=3]="ST_BARCODE_DECODING",e[e.ST_TEXT_LINE_LOCALIZATION=4]="ST_TEXT_LINE_LOCALIZATION",e[e.ST_TEXT_LINE_RECOGNITION=5]="ST_TEXT_LINE_RECOGNITION",e[e.ST_DOCUMENT_DETECTION=6]="ST_DOCUMENT_DETECTION",e[e.ST_DOCUMENT_DESKEWING=7]="ST_DOCUMENT_DESKEWING",e[e.ST_IMAGE_ENHANCEMENT=8]="ST_IMAGE_ENHANCEMENT"}(V||(V={})),function(e){e[e.IFF_JPEG=0]="IFF_JPEG",e[e.IFF_PNG=1]="IFF_PNG",e[e.IFF_BMP=2]="IFF_BMP",e[e.IFF_PDF=3]="IFF_PDF"}(H||(H={})),function(e){e[e.ICDM_NEAR=0]="ICDM_NEAR",e[e.ICDM_FAR=1]="ICDM_FAR"}(j||(j={})),function(e){e.MN_DYNAMSOFT_CAPTURE_VISION_ROUTER="cvr",e.MN_DYNAMSOFT_CORE="core",e.MN_DYNAMSOFT_LICENSE="license",e.MN_DYNAMSOFT_IMAGE_PROCESSING="dip",e.MN_DYNAMSOFT_UTILITY="utility",e.MN_DYNAMSOFT_BARCODE_READER="dbr",e.MN_DYNAMSOFT_DOCUMENT_NORMALIZER="ddn",e.MN_DYNAMSOFT_LABEL_RECOGNIZER="dlr",e.MN_DYNAMSOFT_CAPTURE_VISION_DATA="dcvData",e.MN_DYNAMSOFT_NEURAL_NETWORK="dnn",e.MN_DYNAMSOFT_CODE_PARSER="dcp",e.MN_DYNAMSOFT_CAMERA_ENHANCER="dce",e.MN_DYNAMSOFT_CAPTURE_VISION_STD="std"}(Y||(Y={}));const J={},K=async e=>{let t="string"==typeof e?[e]:e,r=[];for(let e of t)r.push(J[e]=J[e]||new o);await Promise.all(r)};let X,Z=0;const $=()=>Z++,z={};let Q;let q=!1;const ee={},te={dip:{wasm:!0}},re={std:{version:"2.0.0",path:u(E+"../../dynamsoft-capture-vision-std@2.0.0/dist/"),isInternal:!0},core:{version:"4.4.10-dev-20260129110706",path:E,isInternal:!0}};let ne=5;"undefined"!=typeof navigator&&(ne=navigator.hardwareConcurrency?navigator.hardwareConcurrency-1:5),z[-3]=async e=>{ie.onWasmLoadProgressChanged&&ie.onWasmLoadProgressChanged(e.resourcesPath,e.tag,{loaded:e.loaded,total:e.total})};class ie{static get engineResourcePaths(){return re}static set engineResourcePaths(e){Object.assign(re,e)}static get bSupportDce4Module(){return this._bSupportDce4Module}static get bSupportIRTModule(){return this._bSupportIRTModule}static get versions(){return this._versions}static get _onLog(){return Q}static set _onLog(e){(e=>{Q=e,X&&X.postMessage({type:"setBLog",body:{value:!!e}})})(e)}static get _bDebug(){return q}static set _bDebug(e){(e=>{q=e,X&&X.postMessage({type:"setBDebug",body:{value:!!e}})})(e)}static get _workerName(){return`${ie._bundleEnv.toLowerCase()}.bundle.worker.js`}static get wasmLoadOptions(){return ie._wasmLoadOptions}static set wasmLoadOptions(e){Object.assign(ie._wasmLoadOptions,e)}static isModuleLoaded(e){return e=(e=e||"core").toLowerCase(),!!J[e]&&J[e].isFulfilled}static async loadWasm(){return await(async()=>{let e,t;e instanceof Array||(e=e?[e]:[]);let r=J.core;t=!r||r.isEmpty,t||await K("core");let n=new Map;const i=e=>{if(e=e.toLowerCase(),Y.MN_DYNAMSOFT_CAPTURE_VISION_STD==e||Y.MN_DYNAMSOFT_CORE==e)return;let t=te[e].deps;if(null==t?void 0:t.length)for(let e of t)i(e);let r=J[e];n.has(e)||n.set(e,!r||r.isEmpty)};for(let t of e)i(t);let s=[];t&&s.push("core"),s.push(...n.keys());const a=[...n.entries()].filter(e=>!e[1]).map(e=>e[0]);await(async(e,t)=>{let r,n="string"==typeof e?[e]:e,i=[];for(let e of n){let n;i.push(n=J[e]=J[e]||new o(r=r||t())),n.isEmpty&&(n.task=r=r||t())}await Promise.all(i)})(s,async()=>{const e=[...n.entries()].filter(e=>e[1]).map(e=>e[0]);await K(a);const r=(e=>{const t={};for(let r in e){if("rootDirectory"===r)continue;let n=r,i=e[n],s=i&&"object"==typeof i&&i.path?i.path:i,o=e.rootDirectory;if(o&&!o.endsWith("/")&&(o+="/"),"object"==typeof i&&i.isInternal)o&&(s=e[n].version?`${o}${y[n]}@${e[n].version}/${"dcvData"===n?"":"dist/"}${"ddv"===n?"engine":""}`:`${o}${y[n]}/${"dcvData"===n?"":"dist/"}${"ddv"===n?"engine":""}`);else{const r=/^@engineRootDirectory(\/?)/;if("string"==typeof s&&(s=s.replace(r,o||"")),"object"==typeof s&&"dwt"===n){const i=e[n].resourcesPath,s=e[n].serviceInstallerLocation;t[n]={resourcesPath:i.replace(r,o||""),serviceInstallerLocation:s.replace(r,o||"")};continue}}t[n]=u(s)}return t})(re),i={};for(let t of e)i[t]=te[t];const s={engineResourcePaths:r,autoResources:i,names:e,_bundleEnv:ie._bundleEnv,wasmLoadOptions:ie.wasmLoadOptions};let _=new o;if(t){s.needLoadCore=!0;let e=r[`${ie._bundleEnv.toLowerCase()}Bundle`]+ie._workerName;e.startsWith(location.origin)||(e=await fetch(e).then(e=>e.blob()).then(e=>URL.createObjectURL(e))),X=new Worker(e),X.onerror=e=>{let t=new Error(e.message);_.reject(t)},X.addEventListener("message",e=>{let t=e.data?e.data:e,r=t.type,n=t.id,i=t.body;switch(r){case"log":Q&&Q(t.message);break;case"warning":console.warn(t.message);break;case"task":try{z[n](i),delete z[n]}catch(e){throw delete z[n],e}break;case"event":try{z[n](i)}catch(e){throw e}break;default:console.log(e)}}),s.bLog=!!Q,s.bd=q,s.dm=location.origin.startsWith("http")?location.origin:"https://localhost"}else await K("core");let c=Z++;z[c]=e=>{if(e.success)Object.assign(ee,e.versions),"{}"!==JSON.stringify(e.versions)&&(ie._versions=e.versions),ie.loadedWasmType=e.loadedWasmType,_.resolve(void 0);else{const t=Error(e.message);e.stack&&(t.stack=e.stack),_.reject(t)}},X.postMessage({type:"loadWasm",id:c,body:s}),await _})})()}static async detectEnvironment(){return await(async()=>({wasm:S,worker:D,getUserMedia:b,camera:await A(),browser:O.browser,version:O.version,OS:O.OS}))()}static async getModuleVersion(){return await new Promise((e,t)=>{let r=$();z[r]=async r=>{if(r.success)return e(r.versions);{let e=new Error(r.message);return e.stack=r.stack+"\n"+e.stack,t(e)}},X.postMessage({type:"getModuleVersion",id:r})})}static getVersion(){return`4.4.10-dev-20260129110706(Worker: ${ee.core&&ee.core.worker||"Not Loaded"}, Wasm: ${ee.core&&ee.core.wasm||"Not Loaded"})`}static enableLogging(){ie._onLog=console.log}static disableLogging(){ie._onLog=null}static async cfd(e){return await new Promise((t,r)=>{let n=$();z[n]=async e=>{if(e.success)return t();{let t=new Error(e.message);return t.stack=e.stack+"\n"+t.stack,r(t)}},X.postMessage({type:"cfd",id:n,body:{count:e}})})}}ie._bSupportDce4Module=-1,ie._bSupportIRTModule=-1,ie._versions=null,ie._bundleEnv="DCV",ie._wasmLoadOptions={wasmType:"auto",pthreadPoolSize:ne},ie.loadedWasmType="ml-simd-pthread",ie.browserInfo=O;const se="undefined"==typeof self,oe=se?{}:self;let ae,_e,ce,de,le;"undefined"!=typeof navigator&&(ae=navigator,_e=ae.userAgent,ce=ae.platform,de=ae.mediaDevices),function(){if(!se){const e={Edge:{search:"Edg",verSearch:"Edg"},OPR:null,Chrome:null,Safari:{str:ae.vendor,search:"Apple",verSearch:["Version","iPhone OS","CPU OS"]},Firefox:null,Explorer:{search:"MSIE",verSearch:"MSIE"}},t={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:ce,search:"Win"},Mac:{str:ce},Linux:{str:ce}};let r="unknownBrowser",n=0,i="unknownOS";for(let t in e){const i=e[t]||{};let s=i.str||_e,o=i.search||t,a=i.verStr||_e,_=i.verSearch||t;if(_ instanceof Array||(_=[_]),-1!=s.indexOf(o)){r=t;for(let e of _){let t=a.indexOf(e);if(-1!=t){n=parseFloat(a.substring(t+e.length+1));break}}break}}for(let e in t){const r=t[e]||{};let n=r.str||_e,s=r.search||e;if(-1!=n.indexOf(s)){i=e;break}}"Linux"==i&&-1!=_e.indexOf("Windows NT")&&(i="HarmonyOS"),le={browser:r,version:n,OS:i}}se&&(le={browser:"ssr",version:0,OS:"ssr"})}(),de&&de.getUserMedia;const Ee="Chrome"===le.browser&&le.version>66||"Safari"===le.browser&&le.version>13||"OPR"===le.browser&&le.version>43||"Edge"===le.browser&&le.version>15;var ue=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function fe(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}function me(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function Ie(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function pe(e){return"string"!=typeof e&&(console.warn(`${e} used as a key, but it is not a string.`),e=String(e)),e}function Ce(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}const ge="local-forage-detect-blob-support";let Te;const ye={},he=Object.prototype.toString,ve="readonly",Ne="readwrite";function Re(e){return"boolean"==typeof Te?Promise.resolve(Te):function(e){return new Promise(function(t){var r=e.transaction(ge,Ne),n=fe([""]);r.objectStore(ge).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}(e).then(function(e){return Te=e,Te})}function Oe(e){var t=ye[e.name],r={};r.promise=new Promise(function(e,t){r.resolve=e,r.reject=t}),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then(function(){return r.promise}):t.dbReady=r.promise}function Se(e){var t=ye[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function De(e,t){var r=ye[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function be(e,t){return new Promise(function(r,n){if(ye[e.name]=ye[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);Oe(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var s=ue.open.apply(ue,i);t&&(s.onupgradeneeded=function(t){var r=s.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(ge)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),s.onerror=function(e){e.preventDefault(),n(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},r(t),Se(e)}})}function Ae(e){return be(e,!1)}function Le(e){return be(e,!0)}function Me(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,i=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||r){if(r){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function we(e){var t=function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),i=0;i<t;i++)n[i]=e.charCodeAt(i);return r}(atob(e.data));return fe([t],{type:e.type})}function Pe(e){var t=this,r=t._initReady().then(function(){var e=ye[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return Ie(r,e,e),r}function Ue(e,t,r,n){void 0===n&&(n=1);try{var i=e.db.transaction(e.storeName,t);r(null,i)}catch(i){if(n>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return Promise.resolve().then(()=>{if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),Le(e)}).then(()=>function(e){Oe(e);for(var t=ye[e.name],r=t.forages,n=0;n<r.length;n++){const e=r[n];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return e.db=null,Ae(e).then(t=>(e.db=t,Me(e)?Le(e):t)).then(n=>{e.db=t.db=n;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=n}).catch(t=>{throw De(e,t),t})}(e).then(function(){Ue(e,t,r,n-1)})).catch(r);r(i)}}var Fe={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var i=ye[r.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},ye[r.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=Pe);var s=[];function o(){return Promise.resolve()}for(var a=0;a<i.forages.length;a++){var _=i.forages[a];_!==t&&s.push(_._initReady().catch(o))}var c=i.forages.slice(0);return Promise.all(s).then(function(){return r.db=i.db,Ae(r)}).then(function(e){return r.db=e,Me(r,t._defaultConfig.version)?Le(r):e}).then(function(e){r.db=i.db=e,t._dbInfo=r;for(var n=0;n<c.length;n++){var s=c[n];s!==t&&(s._dbInfo.db=r.db,s._dbInfo.version=r.version)}})},_support:function(){try{if(!ue||!ue.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),getItem:function(e,t){var r=this;e=pe(e);var n=new Promise(function(t,n){r.ready().then(function(){Ue(r._dbInfo,ve,function(i,s){if(i)return n(i);try{var o=s.objectStore(r._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),function(e){return e&&e.__local_forage_encoded_blob}(e)&&(e=we(e)),t(e)},o.onerror=function(){n(o.error)}}catch(e){n(e)}})}).catch(n)});return me(n,t),n},setItem:function(e,t,r){var n=this;e=pe(e);var i=new Promise(function(r,i){var s;n.ready().then(function(){return s=n._dbInfo,"[object Blob]"===he.call(t)?Re(s.db).then(function(e){return e?t:(r=t,new Promise(function(e,t){var n=new FileReader;n.onerror=t,n.onloadend=function(t){var n=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:r.type})},n.readAsBinaryString(r)}));var r}):t}).then(function(t){Ue(n._dbInfo,Ne,function(s,o){if(s)return i(s);try{var a=o.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var _=a.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),r(t)},o.onabort=o.onerror=function(){var e=_.error?_.error:_.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return me(i,r),i},removeItem:function(e,t){var r=this;e=pe(e);var n=new Promise(function(t,n){r.ready().then(function(){Ue(r._dbInfo,Ne,function(i,s){if(i)return n(i);try{var o=s.objectStore(r._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){n(o.error)},s.onabort=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)});return me(n,t),n},clear:function(e){var t=this,r=new Promise(function(e,r){t.ready().then(function(){Ue(t._dbInfo,Ne,function(n,i){if(n)return r(n);try{var s=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=s.error?s.error:s.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return me(r,e),r},length:function(e){var t=this,r=new Promise(function(e,r){t.ready().then(function(){Ue(t._dbInfo,ve,function(n,i){if(n)return r(n);try{var s=i.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){r(s.error)}}catch(e){r(e)}})}).catch(r)});return me(r,e),r},keys:function(e){var t=this,r=new Promise(function(e,r){t.ready().then(function(){Ue(t._dbInfo,ve,function(n,i){if(n)return r(n);try{var s=i.objectStore(t._dbInfo.storeName).openKeyCursor(),o=[];s.onsuccess=function(){var t=s.result;t?(o.push(t.key),t.continue()):e(o)},s.onerror=function(){r(s.error)}}catch(e){r(e)}})}).catch(r)});return me(r,e),r},dropInstance:function(e,t){t=Ce.apply(this,arguments);var r,n=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName),e.name){const t=e.name===n.name&&this._dbInfo.db?Promise.resolve(this._dbInfo.db):Ae(e).then(t=>{const r=ye[e.name],n=r.forages;r.db=t;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=t;return t});r=e.storeName?t.then(t=>{if(!t.objectStoreNames.contains(e.storeName))return;const r=t.version+1;Oe(e);const n=ye[e.name],i=n.forages;t.close();for(let e=0;e<i.length;e++){const t=i[e];t._dbInfo.db=null,t._dbInfo.version=r}const s=new Promise((t,n)=>{const i=ue.open(e.name,r);i.onerror=e=>{i.result.close(),n(e)},i.onupgradeneeded=()=>{i.result.deleteObjectStore(e.storeName)},i.onsuccess=()=>{const e=i.result;e.close(),t(e)}});return s.then(e=>{n.db=e;for(let t=0;t<i.length;t++){const r=i[t];r._dbInfo.db=e,Se(r._dbInfo)}}).catch(t=>{throw(De(e,t)||Promise.resolve()).catch(()=>{}),t})}):t.then(t=>{Oe(e);const r=ye[e.name],n=r.forages;t.close();for(var i=0;i<n.length;i++){n[i]._dbInfo.db=null}const s=new Promise((t,r)=>{var n=ue.deleteDatabase(e.name);n.onerror=()=>{const e=n.result;e&&e.close(),r(n.error)},n.onblocked=()=>{console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=()=>{const e=n.result;e&&e.close(),t(e)}});return s.then(e=>{r.db=e;for(var t=0;t<n.length;t++){Se(n[t]._dbInfo)}}).catch(t=>{throw(De(e,t)||Promise.resolve()).catch(()=>{}),t})})}else r=Promise.reject("Invalid arguments");return me(r,t),r}};const Be=new Map;function Ge(e,t){let r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}var ke={_driver:"tempStorageWrapper",_initStorage:async function(e){const t={};if(e)for(let r in e)t[r]=e[r];const r=t.keyPrefix=Ge(e,this._defaultConfig);this._dbInfo=t,Be.has(r)||Be.set(r,new Map)},getItem:function(e,t){e=pe(e);const r=this.ready().then(()=>Be.get(this._dbInfo.keyPrefix).get(e));return me(r,t),r},setItem:function(e,t,r){e=pe(e);const n=this.ready().then(()=>(void 0===t&&(t=null),Be.get(this._dbInfo.keyPrefix).set(e,t),t));return me(n,r),n},removeItem:function(e,t){e=pe(e);const r=this.ready().then(()=>{Be.get(this._dbInfo.keyPrefix).delete(e)});return me(r,t),r},clear:function(e){const t=this.ready().then(()=>{const e=this._dbInfo.keyPrefix;Be.has(e)&&Be.delete(e)});return me(t,e),t},length:function(e){const t=this.ready().then(()=>Be.get(this._dbInfo.keyPrefix).size);return me(t,e),t},keys:function(e){const t=this.ready().then(()=>[...Be.get(this._dbInfo.keyPrefix).keys()]);return me(t,e),t},dropInstance:function(e,t){if(t=Ce.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){const t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}let r;return r=e.name?new Promise(t=>{e.storeName?t(Ge(e,this._defaultConfig)):t(`${e.name}/`)}).then(e=>{Be.delete(e)}):Promise.reject("Invalid arguments"),me(r,t),r}};const xe=(e,t)=>e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t),We=(e,t)=>{const r=e.length;let n=0;for(;n<r;){if(xe(e[n],t))return!0;n++}return!1},Ve=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},He={},je={},Ye={INDEXEDDB:Fe,TEMPSTORAGE:ke},Je=[Ye.INDEXEDDB._driver,Ye.TEMPSTORAGE._driver],Ke=["dropInstance"],Xe=["clear","getItem","keys","length","removeItem","setItem"].concat(Ke),Ze={description:"",driver:Je.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function $e(e,t){e[t]=function(){const r=arguments;return e.ready().then(function(){return e[t].apply(e,r)})}}function ze(){for(let e=1;e<arguments.length;e++){const t=arguments[e];if(t)for(let e in t)t.hasOwnProperty(e)&&(Ve(t[e])?arguments[0][e]=t[e].slice():arguments[0][e]=t[e])}return arguments[0]}class Qe{constructor(e){for(let e in Ye)if(Ye.hasOwnProperty(e)){const t=Ye[e],r=t._driver;this[e]=r,He[r]||this.defineDriver(t)}this._defaultConfig=ze({},Ze),this._config=ze({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(()=>{})}config(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(let t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config}defineDriver(e,t,r){const n=new Promise(function(t,r){try{const n=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(i);const s=Xe.concat("_initStorage");for(let t=0,n=s.length;t<n;t++){const n=s[t];if((!We(Ke,n)||e[n])&&"function"!=typeof e[n])return void r(i)}const o=function(){const t=function(e){return function(){const t=new Error(`Method ${e} is not implemented by the current driver`),r=Promise.reject(t);return me(r,arguments[arguments.length-1]),r}};for(let r=0,n=Ke.length;r<n;r++){const n=Ke[r];e[n]||(e[n]=t(n))}};o();const a=function(r){He[n]&&console.info(`Redefining LocalForage driver: ${n}`),He[n]=e,je[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(a,r):a(!!e._support):a(!0)}catch(e){r(e)}});return Ie(n,t,r),n}driver(){return this._driver||null}getDriver(e,t,r){const n=He[e]?Promise.resolve(He[e]):Promise.reject(new Error("Driver not found."));return Ie(n,t,r),n}ready(e){const t=this,r=t._driverSet.then(()=>(null===t._ready&&(t._ready=t._initDriver()),t._ready));return Ie(r,e,e),r}setDriver(e,t,r){const n=this;Ve(e)||(e=[e]);const i=this._getSupportedDrivers(e);function s(){n._config.driver=n.driver()}function o(e){return n._extend(e),s(),n._ready=n._initStorage(n._config),n._ready}const a=null!==this._driverSet?this._driverSet.catch(()=>Promise.resolve()):Promise.resolve();return this._driverSet=a.then(()=>{const e=i[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then(e=>{n._driver=e._driver,s(),n._wrapLibraryMethodsWithReady(),n._initDriver=function(e){return function(){let t=0;return function r(){for(;t<e.length;){let i=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(i).then(o).catch(r)}s();const i=new Error("No available storage method found.");return n._driverSet=Promise.reject(i),n._driverSet}()}}(i)})}).catch(()=>{s();const e=new Error("No available storage method found.");return n._driverSet=Promise.reject(e),n._driverSet}),Ie(this._driverSet,t,r),this._driverSet}supports(e){return!!je[e]}_extend(e){ze(this,e)}_getSupportedDrivers(e){const t=[];for(let r=0,n=e.length;r<n;r++){const n=e[r];this.supports(n)&&t.push(n)}return t}_wrapLibraryMethodsWithReady(){for(let e=0,t=Xe.length;e<t;e++)$e(this,Xe[e])}createInstance(e){return new Qe(e)}}var qe=new Qe;Date.prototype.kUtilFormat=function(e){const t={"M+":this.getUTCMonth()+1,"d+":this.getUTCDate(),"H+":this.getUTCHours(),"h+":this.getUTCHours()%12||12,"m+":this.getUTCMinutes(),"s+":this.getUTCSeconds(),"q+":Math.floor((this.getUTCMonth()+3)/3),"S+":this.getUTCMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getUTCFullYear()+"").substr(4-RegExp.$1.length)));for(let r in t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("000"+t[r]).substr(("000"+t[r]).length-RegExp.$1.length)));return e};let et=e=>{let t,r,i,s,o,a,_,c,d,l,E,u,f,m,I,p,C,g,T,y,h=oe.btoa,v=oe.atob,N=e.bd,R=e.pd,O=e.vm,S=e.hs,D=e.dt,b=e.dm,A=["https://mlts.dynamsoft.com/","https://slts.dynamsoft.com/"],L=!1,M=Promise.resolve(),w=e.log&&((...t)=>{try{e.log.apply(null,t)}catch(e){setTimeout(()=>{throw e},0)}})||(()=>{}),P=N&&w||(()=>{}),U=e=>e.join(""),F={a:[80,88,27,82,145,164,199,211],b:[187,87,89,128,150,44,190,213],c:[89,51,74,53,99,72,82,118],d:[99,181,118,158,215,103,76,117],e:[99,51,86,105,100,71,120,108],f:[97,87,49,119,98,51,74,48,83,50,86,53],g:[81,85,86,84,76,85,100,68,84,81,32,32],h:[90,87,53,106,99,110,108,119,100,65,32,32],i:[90,71,86,106,99,110,108,119,100,65,32,32],j:[97,88,89,32],k:[29,83,122,137,5,180,157,114],l:[100,71,70,110,84,71,86,117,90,51,82,111]},B=()=>oe[U(F.c)][U(F.e)][U(F.f)]("raw",new Uint8Array(F.a.concat(F.b,F.d,F.k)),U(F.g),!0,[U(F.h),U(F.i)]),G=async e=>{if(oe[U(F.c)]&&oe[U(F.c)][U(F.e)]&&oe[U(F.c)][U(F.e)][U(F.f)]){let t=v(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);let n=r.subarray(0,12),i=r.subarray(n.length);y||(y=await B());let s=await oe[U(F.c)][U(F.e)][U(F.i)]({name:U(F.g),[U(F.j)]:n,[U(F.l)]:128},y,i);return String.fromCharCode.apply(null,new Uint8Array(s))}},k=e=>v(v(e.replace(/\n/g,"+").replace(/\s/g,"=")).substring(1)),x=e=>h(String.fromCharCode(97+25*Math.random())+h(e)).replace(/\+/g,"\n").replace(/=/g," "),W=()=>{if(oe.crypto){let e=new Uint8Array(36);oe.crypto.getRandomValues(e);let t="";for(let r=0;r<36;++r){let n=e[r]%36;t+=n<10?n:String.fromCharCode(n+87)}return t}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})};const V="Failed to connect to the Dynamsoft License Server: ",H=" Check your Internet connection or contact Dynamsoft Support (support@dynamsoft.com) to acquire an offline license.",j={dlsErrorAndCacheExpire:V+"The cached license has expired. Please get connected to the network as soon as possible or contact the site administrator for more information.",publicTrialNetworkTimeout:V+"network timed out."+H,networkTimeout:V+"network timed out. Check your Internet connection or contact the site administrator for more information.",publicTrialFailConnect:V+"network connection error."+H,failConnect:V+"network connection error. Check your Internet connection or contact the site administrator for more information.",checkLocalTime:"Your system date and time appear to have been changed, causing the license to fail. Please correct the system date and time, then try again.",idbTimeout:"Failed to open indexedDB: Timeout.",dlsOfflineLicenseExpired:"The DLS2 Offline license has expired. Please contact the site administrator for more information."};let Y,J,K,X,Z=async()=>{if(Y)return Y;Y=new n,await(async()=>{u||(u=qe)})(),await Promise.race([(async()=>{let e=await u.createInstance({name:"dynamjssdkhello"});await e.setItem("dynamjssdkhello","available")})(),new Promise((e,t)=>{setTimeout(()=>t(new Error(j.idbTimeout)),5e3)})]),m=await u.createInstance({name:"dynamdlsinfo"}),I=h(h("v2")+String.fromCharCode(b.charCodeAt(b.length/2)+1)+h(b));try{let e=await m.getItem(I),t=null;self.indexedDB&&(t=await self.indexedDB.databases());let r=t&&t.some(e=>{if(e)return"dynamltsinfo"===e.name});if(!e&&r){let t=await u.createInstance({name:"dynamltsinfo"});e=await t.getItem(I),e&&await m.setItem(I,e)}e&&([i,l]=JSON.parse(await k(e)))}catch(e){}try{null==i&&(i=W(),m.setItem(I,await x(JSON.stringify([i,null]))))}catch(e){}Y.resolve()},$=async()=>{p=h(String.fromCharCode(S.charCodeAt(0)+10)+h(R)+h(S)+O+h(""+D)),f=await u.createInstance({name:"dynamdlsuns"+h(h("v2"))+h(String.fromCharCode(S.charCodeAt(0)+10)+h(R)+h(S)+O+h(""+D))});try{r=await m.getItem(p)}catch(e){}U=e=>v(String.fromCharCode.apply(null,e).replace(/\n/g,"+").replace(/\s/g,"="))},z=async(e,u)=>{if(K=Date.now(),J)return J;J=new n;try{let n={pd:R,vm:O,v:t,dt:D||"browser",ed:"javascript",cu:i,ad:b,os:s,fn:o,om:u&&u.om?u.om:[],ic:u&&u.ic?u.ic:{}};c&&(n.rmk=c),S&&(-1!=S.indexOf("-")?n.hs=S:n.og=S);let E={};if(l){let e=await m.getItem(I);e&&([i,l]=JSON.parse(await k(e))),E["lts-time"]=l}_&&(n.sp=_);let f=await Promise.race([(async()=>{let t,s=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");l&&(m.setItem(I,await x(JSON.stringify([i,s]))),l=s);let o="auth/?ext="+encodeURIComponent(h(JSON.stringify(n)));d&&(o+="&"+encodeURIComponent(d));let _,c=!1,u=!1,f=async e=>{if(e&&!e.ok)try{let t=await e.text();if(t){let e=JSON.parse(t);e.errorCode&&(_=e,e.errorCode>100&&e.errorCode<200&&(r=null,c=!0,u=!0))}}catch(e){}};try{t=await Promise.race([fetch(A[0]+o,{headers:E,cache:e?"reload":"default",mode:"cors"}),new Promise((e,t)=>setTimeout(t,1e4))]),await f(t)}catch(e){}if(!(r||t&&t.ok||c))try{t=await Promise.race([fetch(A[1]+o,{headers:E,mode:"cors"}),new Promise((e,t)=>setTimeout(t,3e4))]),await f(t)}catch(e){}if(!(r||t&&t.ok||c))try{t=await Promise.race([fetch(A[0]+o,{headers:E,mode:"cors"}),new Promise((e,t)=>setTimeout(t,3e4))]),await f(t)}catch(e){}_&&151==_.errorCode&&(m.removeItem(I),m.removeItem(p),i=W(),n.cu=i,l=void 0,o="auth/?ext="+encodeURIComponent(h(JSON.stringify(n))),t=await Promise.race([fetch(A[0]+o,{headers:E,mode:"cors"}),new Promise((e,t)=>setTimeout(t,3e4))]),await f(t)),(()=>{if(!t||!t.ok){let e;u&&m.setItem(p,""),_?111==_.errorCode?e=_.message:(e=_.message.trim(),e.endsWith(".")||(e+="."),e=a?`An error occurred during authorization: ${e} [Contact Dynamsoft](https://www.dynamsoft.com/company/contact/) for more information.`:`An error occurred during authorization: ${e} Contact the site administrator for more information.`):e=a?j.publicTrialFailConnect:j.failConnect;let t=Error(e);throw _&&_.errorCode&&(t.ltsErrorCode=_.errorCode),t}})();let C=await t.text();try{l||(m.setItem(I,await x(JSON.stringify([i,s]))),l=s),m.setItem(p,C)}catch(e){}return C})(),new Promise((e,t)=>{let n;n=a?j.publicTrialNetworkTimeout:j.networkTimeout,setTimeout(()=>t(new Error(n)),r?3e3:15e3)})]);r=f}catch(e){N&&console.error(e),E=e}J.resolve(),J=null},Q=async()=>{X||(X=(async()=>{if(P(i),!r){if(!L)throw w(E.message),E;return}let e={dm:b};N&&(e.bd=!0),e.brtk=!0,e.ls=A[0],S&&(-1!=S.indexOf("-")?e.hs=S:e.og=S),e.cu=i,o&&(e.fn=o),R&&(e.pd=R),t&&(e.v=t),D&&(e.dt=D),s&&(e.os=s),c&&(e.rmk=c),P(r);try{let t=JSON.parse(await G(r));if(t.pv&&(e.pv=JSON.stringify(t.pv)),t.ba&&(e.ba=t.ba),t.usu&&(e.usu=t.usu),t.trial&&(e.trial=t.trial),t.its&&(e.its=t.its),t.lm&&(e.lm=t.lm),t.mli){const r={};for(let e in t.mli)r[e]=t.mli[e][0];e.ic=r,e.mli=t.mli}t.mlo&&(e.mlo=t.mlo),1==e.trial&&t.msg?e.msg=t.msg:E?e.msg=E.message||E:t.msg&&(e.msg=t.msg),e.ar=t.in,e.bafc=!!E}catch(e){}P(e);try{await C(e)}catch(e){P("error updl")}await q(),L||(L=!0),X=null})()),await X},q=async()=>{let e=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),t=await T();if(P(t),t&&t<e)throw E?new Error(j.dlsErrorAndCacheExpire):new Error(j.checkLocalTime)};const ee=new n;let te=null,re=async(e,t)=>(M=M.then(async()=>{try{let r=await f.keys();if(t||(ee.isFulfilled?e&&(r=r.filter(t=>t<e)):e&&r.includes(e)?r=[e]:(r=[],P("Unexpected null key"))),!r.length)return;for(let e=0;e<r.length/1e3;++e){let t=r.slice(1e3*e,1e3*(e+1)),n=[];for(let e=0;e<t.length;++e)n.push(await f.getItem(t[e]));l=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");{let e=await m.getItem(I);e&&([i]=JSON.parse(await k(e))),m.setItem(I,await x(JSON.stringify([i,l])))}try{let e,r,i=A[0]+"verify/v2";l&&(i+="?ltstime="+encodeURIComponent(l));try{e=fetch(i,{method:"POST",body:n.join(";"),keepalive:!0})}finally{!ee.isFulfilled&&Ee&&ee.resolve()}try{r=await e}finally{ee.isFulfilled||ee.resolve()}if(!r.ok)throw new Error("verify failed. Status Code: "+r.status);for(let e=0;e<t.length;++e)await f.removeItem(t[e])}catch(e){throw ee.isFulfilled||ee.resolve(),e}}}catch(e){}}),await M);return{i:async e=>{R=e.pd,t=e.v,O=t.split(".")[0],e.dt&&(D=e.dt),S=e.l||"",s="string"!=typeof e.os?JSON.stringify(e.os):e.os,o=e.fn,"string"==typeof o&&(o=o.substring(0,255)),e.ls&&e.ls.length&&(A=e.ls,1==A.length&&A.push(A[0])),a=!S||"200001"===S||S.startsWith("200001-"),_=e.sp,c=e.rmk,"string"==typeof c&&(c=c.substring(0,255)),e.cv&&(d=""+e.cv),C=e.updl,g=e.mnet,T=e.mxet,await Z(),await $(),await z(),await Q(),(!E||E.ltsErrorCode>=102&&E.ltsErrorCode<=120)&&re(null,!0)},i2:async({updl:e,mxet:t,strDLC2:n})=>{C=e,T=t,await Z(),U=e=>v(String.fromCharCode.apply(null,e).replace(/\n/g,"+").replace(/\s/g,"="));let s={pk:n,dm:b};N&&(s.bd=!0),s.cu=i;try{r=n.substring(4);let e=JSON.parse(await G(r));e.pv&&(s.pv=JSON.stringify(e.pv)),e.ba&&(s.ba=e.ba),s.ar=e.in}catch(e){}P(s);try{await C(s)}catch(e){P("error updl")}let o=(new Date).kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),a=await T();if(a&&a<o)throw new Error(j.dlsOfflineLicenseExpired)},ih:$,c:async()=>{let e=new Date;if(e.getTime()<K+36e4)return;let t=e.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ"),r=await g(),n=await T();if(n&&n<t)await z(!0),await Q();else if(r&&r<t){let t=new Date(e.getTime());t.setMinutes(e.getMinutes()-6);let r=t.kUtilFormat("yyyy-MM-ddTHH:mm:ss.SSSZ");l<r&&z().then(()=>Q())}},s:async(e,t,r,n)=>{try{let e=(t=t.trim()).startsWith("{")&&t.endsWith("}")?await(async e=>{if(oe[U(F.c)]&&oe[U(F.c)][U(F.e)]&&oe[U(F.c)][U(F.e)][U(F.f)]){let t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);let r=oe.crypto.getRandomValues(new Uint8Array(12));y||(y=await B());let n=await oe[U(F.c)][U(F.e)][U(F.h)]({name:U(F.g),[U(F.j)]:r,[U(F.l)]:128},y,t),i=new Uint8Array(n),s=new Uint8Array(r.length+i.length);return s.set(r),s.set(i,r.length),h(String.fromCharCode.apply(null,s))}})(t):t;e?(P("bs "+r),await f.setItem(r,e),P("ss "+r)):P("ept ecpt")}catch(e){}n&&(P("bd "+r),await re(r,2==n),P("sd "+r)),te&&clearTimeout(te),te=setTimeout(async()=>{await re()},36e4)},p:ee,u:async()=>(await Z(),i),ar:()=>r,pt:()=>a,ae:()=>E,glfd:z,caul:Q}};const tt="undefined"==typeof self,rt="function"==typeof importScripts,nt=(()=>{if(!rt){if(!tt&&document.currentScript){let e=document.currentScript.src,t=e.indexOf("?");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf("#");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf("/")+1)}return"./"}})(),it=e=>{if(null==e&&(e="./"),tt||rt);else{let t=document.createElement("a");t.href=e,e=t.href}return e.endsWith("/")||(e+="/"),e};ie.engineResourcePaths.dbr={version:"11.4.10-dev-20260129110729",path:nt,isInternal:!0},te.dbr={js:!1,wasm:!0,deps:[Y.MN_DYNAMSOFT_LICENSE,Y.MN_DYNAMSOFT_IMAGE_PROCESSING]};const st="2.0.0";"string"!=typeof ie.engineResourcePaths.std&&T(ie.engineResourcePaths.std.version,st)<0&&(ie.engineResourcePaths.std={version:st,path:it(nt+`../../dynamsoft-capture-vision-std@${st}/dist/`),isInternal:!0});const ot="3.0.10";(!ie.engineResourcePaths.dip||"string"!=typeof ie.engineResourcePaths.dip&&T(ie.engineResourcePaths.dip.version,ot)<0)&&(ie.engineResourcePaths.dip={version:ot,path:it(nt+`../../dynamsoft-image-processing@${ot}/dist/`),isInternal:!0});BigInt(0),BigInt("0xFFFFFFFEFFFFFFFF"),BigInt(4265345023);const at=BigInt(3147775),_t=BigInt(260096),ct=(BigInt(1),BigInt(2),BigInt(4),BigInt(8),BigInt(16),BigInt(32),BigInt(64),BigInt(128),BigInt(256),BigInt(512),BigInt(1024),BigInt(2048),BigInt(4096),BigInt(8192),BigInt(16384),BigInt(32768),BigInt(65536),BigInt(131072),BigInt(262144)),dt=BigInt(16777216),lt=BigInt(33554432),Et=BigInt(67108864),ut=BigInt(134217728),ft=BigInt(268435456),mt=BigInt(536870912),It=BigInt(1073741824),pt=BigInt(524288),Ct=BigInt(2147483648),gt=(BigInt(1048576),BigInt(2097152),BigInt(4194304),BigInt(8388608),BigInt(68719476736)),Tt=BigInt(0x3f0000000000000),yt=BigInt(4294967296),ht=(BigInt(4503599627370496),BigInt(9007199254740992),BigInt(0x40000000000000),BigInt(0x80000000000000),BigInt(72057594037927940),BigInt(0x200000000000000)),vt=BigInt(8589934592),Nt=BigInt(17179869184),Rt=BigInt(34359738368),Ot=BigInt(51539607552),St=BigInt(137438953472),Dt=BigInt(274877906944);var bt,At,Lt,Mt;!function(e){e[e.EBRT_STANDARD_RESULT=0]="EBRT_STANDARD_RESULT",e[e.EBRT_CANDIDATE_RESULT=1]="EBRT_CANDIDATE_RESULT",e[e.EBRT_PARTIAL_RESULT=2]="EBRT_PARTIAL_RESULT"}(bt||(bt={})),function(e){e[e.QRECL_ERROR_CORRECTION_H=0]="QRECL_ERROR_CORRECTION_H",e[e.QRECL_ERROR_CORRECTION_L=1]="QRECL_ERROR_CORRECTION_L",e[e.QRECL_ERROR_CORRECTION_M=2]="QRECL_ERROR_CORRECTION_M",e[e.QRECL_ERROR_CORRECTION_Q=3]="QRECL_ERROR_CORRECTION_Q"}(At||(At={})),function(e){e[e.LM_AUTO=1]="LM_AUTO",e[e.LM_CONNECTED_BLOCKS=2]="LM_CONNECTED_BLOCKS",e[e.LM_STATISTICS=4]="LM_STATISTICS",e[e.LM_LINES=8]="LM_LINES",e[e.LM_SCAN_DIRECTLY=16]="LM_SCAN_DIRECTLY",e[e.LM_STATISTICS_MARKS=32]="LM_STATISTICS_MARKS",e[e.LM_STATISTICS_POSTAL_CODE=64]="LM_STATISTICS_POSTAL_CODE",e[e.LM_CENTRE=128]="LM_CENTRE",e[e.LM_ONED_FAST_SCAN=256]="LM_ONED_FAST_SCAN",e[e.LM_NEURAL_NETWORK=512]="LM_NEURAL_NETWORK",e[e.LM_REV=-2147483648]="LM_REV",e[e.LM_SKIP=0]="LM_SKIP",e[e.LM_END=-1]="LM_END"}(Lt||(Lt={})),function(e){e[e.DM_DIRECT_BINARIZATION=1]="DM_DIRECT_BINARIZATION",e[e.DM_THRESHOLD_BINARIZATION=2]="DM_THRESHOLD_BINARIZATION",e[e.DM_GRAY_EQUALIZATION=4]="DM_GRAY_EQUALIZATION",e[e.DM_SMOOTHING=8]="DM_SMOOTHING",e[e.DM_MORPHING=16]="DM_MORPHING",e[e.DM_DEEP_ANALYSIS=32]="DM_DEEP_ANALYSIS",e[e.DM_SHARPENING=64]="DM_SHARPENING",e[e.DM_BASED_ON_LOC_BIN=128]="DM_BASED_ON_LOC_BIN",e[e.DM_SHARPENING_SMOOTHING=256]="DM_SHARPENING_SMOOTHING",e[e.DM_NEURAL_NETWORK=512]="DM_NEURAL_NETWORK",e[e.DM_REV=-2147483648]="DM_REV",e[e.DM_SKIP=0]="DM_SKIP",e[e.DM_END=-1]="DM_END"}(Mt||(Mt={}));let wt,Pt,Ut,Ft,Bt,Gt,kt,xt,Wt,Vt,Ht,jt,Yt,Jt,Kt,Xt,Zt,$t={},zt=[],Qt={},qt=!1,er=!1,tr=!1,rr=new Set,nr={};const ir="ZYJ3y#bWtC64A6RPE8h_lv1E#H^ZUe75",sr={},or={},ar={},_r={},cr={},dr=[],lr=self.Module={print:e=>{tr&&pr(e)},printErr:e=>{tr&&pr(e)},locateFile:(e,t)=>["dynamsoft-capture-vision-std.wasm","dynamsoft-core.wasm"].includes(e)?_r[e.split(".")[0].split("-").at(-1)]+e:_r[`${jt.toLowerCase()}Bundle`]+e},Er={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(Er.needed){for(let e=0;e<Er.temps.length;e++)lr._free(Er.temps[e]);Er.temps.length=0,lr._free(Er.buffer),Er.buffer=0,Er.size+=Er.needed,Er.needed=0}Er.buffer||(Er.size+=128,Er.buffer=lr._malloc(Er.size),assert(Er.buffer)),Er.pos=0},alloc:function(e,t){assert(Er.buffer);let r,n=t.BYTES_PER_ELEMENT,i=e.length*n;return i=i+7&-8,Er.pos+i>=Er.size?(assert(i>0),Er.needed+=i,r=lr._malloc(i),Er.temps.push(r)):(r=Er.buffer+Er.pos,Er.pos+=i),r},copy:function(e,t,r){switch(r>>>=0,t.BYTES_PER_ELEMENT){case 2:r>>>=1;break;case 4:r>>>=2;break;case 8:r>>>=3}for(let n=0;n<e.length;n++)t[r+n]=e[n]}},ur=Er.prepare,fr=e=>{let t=intArrayFromString(e),r=Er.alloc(t,lr.HEAP8);return Er.copy(t,lr.HEAP8,r),r},mr=(e,t)=>{postMessage({type:"task",id:e,body:Object.assign({success:!0},t)})},Ir=(e,t)=>{let r={};t instanceof Error?r=t:r.message=String(t),postMessage({type:"task",id:e,body:{success:!1,message:r.message||"No error message available.",stack:er&&r.stack||"No stack trace available."}})},pr=e=>{postMessage({type:"log",message:e})},Cr=e=>{postMessage({type:"warning",message:e})},gr=t=>e(void 0,void 0,void 0,function*(){let e="string"==typeof t?[t]:t,r=[];for(let t of e)r.push(or[t]=or[t]||new n);yield Promise.all(r)}),Tr=(t,r)=>e(void 0,void 0,void 0,function*(){let e,i="string"==typeof t?[t]:t,s=[];for(let t of i){let i;s.push(i=or[t]=or[t]||new n(e=e||r())),i.isEmpty&&(i.task=e=e||r())}yield Promise.all(s)}),yr=(e,t=0,r=0,n=0)=>{r&&(e=n?e.subarray(r,n):e.subarray(r));let i=dr[t]=dr[t]||{ptr:0,size:0,maxSize:0};return e.length>i.maxSize&&(i.ptr&&lr._free(i.ptr),i.ptr=lr._malloc(e.length),i.maxSize=e.length),lr.HEAPU8.set(e,i.ptr),i.size=e.length,i.ptr},hr=()=>e(void 0,void 0,void 0,function*(){const t="core";yield Tr(t,()=>e(void 0,void 0,void 0,function*(){let e=tr&&(pr(t+" loading..."),Date.now())||0,r=new Promise(r=>{lr.onRuntimeInitialized=()=>{wt=wasmExports,tr&&pr(t+" initialized, cost "+(Date.now()-e)+" ms"),r(void 0)}});Pt=WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),Ut=(()=>{let e="-ml-simd";if("DBR"===jt){if("ml-simd-pthread"===Kt&&Pt&&crossOriginIsolated)e="-ml-simd-pthread";else if("ml-simd"===Kt&&Pt)e="-ml-simd";else if("baseline"===Kt)e="",qt=!0;else if("auto"===Kt){const t=["iPhone","Mac"].includes(le.OS);Pt&&crossOriginIsolated?e=t?"-ml-simd":"-ml-simd-pthread":Pt&&!crossOriginIsolated?e="-ml-simd":Pt||(e="",qt=!0)}}else if("ml-simd-pthread"===Kt&&Pt&&crossOriginIsolated)e="-ml-simd-pthread";else if("ml-simd"===Kt&&Pt)e="-ml-simd";else if("ml"===Kt)e="-ml";else if("auto"===Kt){const t=["iPhone","Mac"].includes(le.OS);Pt&&crossOriginIsolated?e=t?"-ml-simd":"-ml-simd-pthread":Pt&&!crossOriginIsolated?e="-ml-simd":Pt||(e="-ml")}return e})();let n=Yt+Ut,i=_r[`${jt.toLowerCase()}Bundle`]+n+".js";if(lr.mainScriptUrlOrBlob=i,lr.pthreadPoolSize=Xt,lr.pthreadJsCache=new Map,pr("import library: "+i),"-ml-simd-pthread"===Ut){const e=yield g(i,"blob"),t=yield g(i.replace("-pthread","-pthread.worker"),"blob");lr.pthreadJsCache.set("pthreadjs",e),lr.pthreadJsCache.set("pthreadWorkerjs",t),i=URL.createObjectURL(e)}importScripts(i),URL.revokeObjectURL(i),yield r}));{let e=[];"DCV"===jt?e=["CVR","LICENSE","UTILITY","DIP","DBR","DLR","DDN","DCP","IdentityUtility"]:"DBR"===jt&&(e=["CVR","LICENSE","DIP","DBR","DCP"]);for(let t of e)ur(),wt.emscripten_bind_CoreWasm_PreSetModuleExist(fr(t)),ur(),wt.emscripten_bind_CvrWasm_SetModuleExist(fr(t),!0);Qt=JSON.parse(UTF8ToString(wt.emscripten_bind_CoreWasm_GetModuleVersion()));for(let e in Qt){const t=e.toLowerCase(),r="3.4.1000-dev-20260214095351";sr[t]={worker:`${r}`,wasm:Qt[e]}}}}),vr=(t,{js:r,wasm:n})=>e(void 0,void 0,void 0,function*(){yield Tr(t,()=>e(void 0,void 0,void 0,function*(){yield gr("core")}))}),Nr={loadWasm:(t,r)=>e(void 0,void 0,void 0,function*(){try{Object.assign(_r,t.engineResourcePaths),Kt=t.wasmLoadOptions.wasmType,Xt=t.wasmLoadOptions.pthreadPoolSize,t.needLoadCore&&(t.bLog&&(tr=!0),t.dm&&(Bt=t.dm),t.bd&&(er=!0),jt=t._bundleEnv,Jt="DCV"===jt?_r.dcvData:_r.dbrBundle,Yt="DCV"===jt?"dynamsoft-capture-vision-bundle":"dynamsoft-barcode-reader-bundle",yield hr());for(let e of t.names)yield vr(e,t.autoResources[e]);mr(r,{versions:sr,loadedWasmType:Ut?Ut.replace("-",""):"baseline"})}catch(e){Ir(r,e)}}),setBLog:e=>{tr=e.value},setBDebug:e=>{er=e.value},getModuleVersion:(t,r)=>e(void 0,void 0,void 0,function*(){try{let e=UTF8ToString(wt.emscripten_bind_CoreWasm_GetModuleVersion());mr(r,{versions:JSON.parse(e)})}catch(e){Ir(r,e)}}),cfd:(t,r)=>e(void 0,void 0,void 0,function*(){try{wt.emscripten_bind_CoreWasm_static_CFD(t.count),mr(r,{})}catch(e){Ir(r,e)}}),imagePtrToUint8Array:(t,r)=>e(void 0,void 0,void 0,function*(){try{let e=new Uint8Array(new Uint8Array(HEAP8.buffer,t.data.ptr,t.data.length));postMessage({type:"task",id:r,body:{success:!0,u8:e}},[e.buffer])}catch(e){Ir(r,e)}}),resolveDsImageData:(t,r,n)=>e(void 0,void 0,void 0,function*(){try{const e=JSON.parse(UTF8ToString(wasmExports.emscripten_bind_CoreWasm_ResolveImageData(t.point)));e.bytes=new Uint8Array(new Uint8Array(HEAP8.buffer,e.bytes.ptr,e.bytes.length)),postMessage({type:"task",id:r,body:{success:!0,result:e}},[e.bytes.buffer])}catch(e){Ir(r,e)}})};Object.assign(Nr,{cvr_createInstance:(t,r)=>e(void 0,void 0,void 0,function*(){try{let e=wt.emscripten_bind_CvrWasm_CvrWasm();t.loadPresetTemplates&&(_r.dbr&&(Gt=yield g(Jt+"templates/DBR-PresetTemplates.json","text"),ur(),wt.emscripten_bind_CvrWasm_AppendParameterContent(e,fr(Gt))),"DCV"===jt&&(_r.dlr&&(kt=yield g(Jt+"templates/DLR-PresetTemplates.json","text"),ur(),wt.emscripten_bind_CvrWasm_AppendParameterContent(e,fr(kt))),_r.ddn&&(xt=yield g(Jt+"templates/DDN-PresetTemplates.json","text"),ur(),wt.emscripten_bind_CvrWasm_AppendParameterContent(e,fr(xt)))),wt.emscripten_bind_CvrWasm_InitParameter(e)),ur();const n=UTF8ToString(wt.emscripten_bind_CvrWasm_OutputSettings(e,fr("*"),!1));let i=JSON.parse(UTF8ToString(wt.emscripten_bind_CoreWasm_GetModuleVersion())).CVR;rr.add(e),mr(r,{instanceID:e,version:i,outputSettings:n,isNoOnnx:qt})}catch(e){Ir(r,e)}}),cvr_appendDLModelBuffer:(t,r)=>e(void 0,void 0,void 0,function*(){let e;try{for(let e of t.modelNames)Rr(e,t.path);e=yield Promise.all(Object.values(nr)),mr(r,{success:!0,response:e[0]})}catch(e){Ir(r,e)}}),cvr_clearDLModelBuffers:(t,r)=>e(void 0,void 0,void 0,function*(){try{wt.emscripten_bind_CvrWasm_ClearDLModelBuffers(),nr={},mr(r,{success:!0})}catch(e){Ir(r,e)}}),cvr_initSettings:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{let i=t.settings;if(qt){const e=/"ModelNameArray"\s*:\s*\[[^\]]*\]/g;let t=i.match(e);for(let e of t){let t=JSON.parse(`{${e}}`);if(t.ModelNameArray&&t.ModelNameArray.length>0){Cr("Model not supported in the current environment, skipped.");break}}}ur(),e=UTF8ToString(wt.emscripten_bind_CvrWasm_InitSettings(n,fr(i))),mr(r,{success:!0,response:e})}catch(e){Ir(r,e)}}),cvr_setCrrRegistry:(t,r,n)=>e(void 0,void 0,void 0,function*(){try{rr.has(n)&&(ur(),wt.emscripten_bind_CvrWasm_SetCrrRegistry(n,fr(t.receiver))),mr(r,{success:!0})}catch(e){Ir(r,e)}}),cvr_startCapturing:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e=!1;try{ur();const i=JSON.parse(UTF8ToString(wt.emscripten_bind_CvrWasm_StartCapturing(n,fr(t.templateName))));if(![0,-90003].includes(i.errorCode))throw new Error(`[${i.errorCode}] ${i.errorString}`);yield br(n,t),ur();const s=JSON.parse(UTF8ToString(wt.emscripten_bind_CvrWasm_OutputSettings(n,fr(t.templateName),!0)));if(s&&![0,w.EC_UNSUPPORTED_JSON_KEY_WARNING].includes(s.errorCode))throw new Error(`[${s.errorCode}] ${s.errorString}`);e=1===JSON.parse(s.data).CaptureVisionTemplates[0].OutputOriginalImage,yield Dr(n,t),mr(r,{success:!0,isOutputOriginalImage:e})}catch(e){Ir(r,e)}}),cvr_stopCapturing:(e,t,r)=>{try{wt.emscripten_bind_CvrWasm_StopCapturing(r),mr(t,{success:!0})}catch(e){Ir(t,e)}},cvr_parseRequiredResources:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{ur(),e=UTF8ToString(wt.emscripten_bind_CvrWasm_ParseRequiredResources(n,fr(t.templateName))),mr(r,{success:!0,resources:e})}catch(e){Ir(r,e)}}),cvr_setObservedResultUnitTypes:(e,t,r)=>{try{ur(),wt.emscripten_bind_CvrWasm_SetObservedResultUnitTypes(r,fr(e.types))}catch(e){Ir(t,e)}mr(t,{success:!0})},cvr_getObservedResultUnitTypes:(e,t,r)=>{let n;try{ur(),n=UTF8ToString(wt.emscripten_bind_CvrWasm_GetObservedResultUnitTypes(r))}catch(e){Ir(t,e)}mr(t,{success:!0,result:n})},cvr_isResultUnitTypeObserved:(e,t,r)=>{let n;try{ur(),n=wt.emscripten_bind_CvrWasm_IsResultUnitTypeObserved(r,fr(e.type))}catch(e){Ir(t,e)}mr(t,{success:!0,result:n})},cvr_capture:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e,i,s;yield Gr();let o=[];pr(`time worker get msg: ${Date.now()}`);try{let a=Date.now();yield Dr(n,t),yield br(n,t),pr("appendResourceTime: "+(Date.now()-a)),o.push(t.bytes.buffer),e=wt.emscripten_bind_Create_CImageData(t.bytes.length,yr(t.bytes,0),t.width,t.height,t.stride,t.format,0);let _=Date.now();pr(`start worker capture: ${_}`);const c="DCV"!==jt||t.isScanner;ur(),s=UTF8ToString(wt.emscripten_bind_CvrWasm_Capture(n,e,fr(t.templateName),c,t.dynamsoft));let d=Date.now();if(pr("worker time: "+(d-_)),pr(`end worker capture: ${d}`),wt.emscripten_bind_Destory_CImageData(e),s=JSON.parse(s,function(e,t){if("format"===e&&!p(this))return BigInt(t);if(I(e,t)){const e=new Uint8Array(new Uint8Array(HEAP8.buffer,t.ptr,t.length));return o.push(e.buffer),e}return t}),s.isCheckFailed)throw new Error(`[${s.errorCode}] ${s.errorString}`);let l=Date.now();pr("capture result parsed: "+(l-d));let E=Date.now();pr("result new Uint8Array: "+(E-l)),i=JSON.parse(UTF8ToString(wt.emscripten_bind_CvrWasm_GetIntermediateResult(n)),(e,t)=>{if(["format","possibleFormats","unitType"].includes(e))return BigInt(t);if(I(e,t)){const e=new Uint8Array(new Uint8Array(HEAP8.buffer,t.ptr,t.length));return o.push(e.buffer),e}return t}),i&&Ar(i);let u=Date.now();pr("get intermediate result: "+(u-E)),pr("after capture handle time: "+(Date.now()-d));const f=Date.now();pr(`time worker return msg: ${f}`),wr(s);let m=yield Pr();postMessage({type:"task",id:r,body:{success:!0,captureResult:s,intermediateResult:i,workerReturnMsgTime:f,mliRecord:Ht.mli?m:null,isScanner:t.isScanner,bytes:t.bytes}},o)}catch(e){return void Ir(r,e)}}),cvr_outputSettings:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{ur(),e=UTF8ToString(wt.emscripten_bind_CvrWasm_OutputSettings(n,fr(t.templateName),t.includeDefaultValues)),mr(r,{success:!0,response:e})}catch(e){Ir(r,e)}}),cvr_setGlobalIntraOpNumThreads:(e,t,r)=>{try{ur(),wt.emscripten_bind_CvrWasm_SetGlobalIntraOpNumThreads(r,e.intraOpNumThreads),mr(t,{success:!0})}catch(e){Ir(t,e)}},cvr_getTemplateNames:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{ur(),e=UTF8ToString(wt.emscripten_bind_CvrWasm_GetTemplateNames(n)),mr(r,{success:!0,response:e})}catch(e){Ir(r,e)}}),cvr_getSimplifiedSettings:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{ur(),e=UTF8ToString(wt.emscripten_bind_CvrWasm_GetSimplifiedSettings(n,fr(t.templateName))),mr(r,{success:!0,response:e})}catch(e){Ir(r,e)}}),cvr_updateSettings:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e,i=!1;try{let s=t.settings,o=t.templateName;"object"==typeof s&&s.hasOwnProperty("barcodeSettings")&&(s.barcodeSettings.barcodeFormatIds=s.barcodeSettings.barcodeFormatIds.toString()),ur(),e=UTF8ToString(wt.emscripten_bind_CvrWasm_UpdateSettings(n,fr(o),fr(JSON.stringify(s)))),ur();const a=JSON.parse(UTF8ToString(wt.emscripten_bind_CvrWasm_OutputSettings(n,fr(o))));if(!a.errorCode){i=1===JSON.parse(a.data).CaptureVisionTemplates[0].OutputOriginalImage}yield Dr(n,t),mr(r,{success:!0,response:e,isOutputOriginalImage:i})}catch(e){Ir(r,e)}}),cvr_resetSettings:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{wt.emscripten_bind_CvrWasm_ResetSettings(n),ur(),Gt&&wt.emscripten_bind_CvrWasm_AppendParameterContent(n,fr(Gt)),ur(),kt&&wt.emscripten_bind_CvrWasm_AppendParameterContent(n,fr(kt)),ur(),xt&&wt.emscripten_bind_CvrWasm_AppendParameterContent(n,fr(xt)),e=UTF8ToString(wt.emscripten_bind_CvrWasm_InitParameter(n)),mr(r,{success:!0,response:e})}catch(e){Ir(r,e)}}),cvr_cc:(t,r,n)=>e(void 0,void 0,void 0,function*(){try{ur(),wt.emscripten_bind_CvrWasm_CC(n,fr(t.text),fr(t.strFormat),t.isDPM),mr(r,{success:!0})}catch(e){Ir(r,e)}}),cvr_getClarity:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{ur(),e=wt.emscripten_bind_CoreWasm_GetClarity(yr(t.bytes),t.width,t.height,t.stride,t.bitcount,t.wr,t.hr,t.grayThreshold),mr(r,{success:!0,clarity:e})}catch(e){Ir(r,e)}}),cvr_getMaxBufferedItems:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{e=wt.emscripten_bind_CvrWasm_GetMaxBufferedItems(n),mr(r,{success:!0,count:e})}catch(e){Ir(r,e)}}),cvr_setMaxBufferedItems:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{e=wt.emscripten_bind_CvrWasm_SetMaxBufferedItems(n,t.count),mr(r,{success:!0})}catch(e){Ir(r,e)}}),cvr_getBufferedCharacterItemSet:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{e=JSON.parse(UTF8ToString(wt.emscripten_bind_CvrWasm_GetBufferedCharacterItemSet(n)),(e,t)=>I(e,t)?new Uint8Array(new Uint8Array(HEAP8.buffer,t.ptr,t.length)):t),mr(r,{success:!0,itemSet:e})}catch(e){Ir(r,e)}}),cvr_setIrrRegistry:(t,r,n)=>e(void 0,void 0,void 0,function*(){try{if(rr.has(n)){ur(),wt.emscripten_bind_CvrWasm_SetIrrRegistry(n,fr(JSON.stringify(t.receiverObj))),t.observedResultUnitTypes&&"-1"!==t.observedResultUnitTypes&&(ur(),wt.emscripten_bind_CvrWasm_SetObservedResultUnitTypes(n,fr(t.observedResultUnitTypes)));for(let e in t.observedTaskMap)t.observedTaskMap[e]?(ur(),wt.emscripten_bind_CvrWasm_AddObservedTask(n,fr(e))):(ur(),wt.emscripten_bind_CvrWasm_RemoveObservedTask(n,fr(e)))}mr(r,{success:!0})}catch(e){Ir(r,e)}}),cvr_enableResultCrossVerification:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{for(let r in t.verificationEnabled)e=wt.emscripten_bind_CvrWasm_EnableResultCrossVerification(n,Number(r),t.verificationEnabled[r]);mr(r,{success:!0,result:e})}catch(e){Ir(r,e)}}),cvr_enableResultDeduplication:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{for(let r in t.duplicateFilterEnabled)e=wt.emscripten_bind_CvrWasm_EnableResultDeduplication(n,Number(r),t.duplicateFilterEnabled[r]);mr(r,{success:!0,result:e})}catch(e){Ir(r,e)}}),cvr_setDuplicateForgetTime:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{for(let r in t.duplicateForgetTime)e=wt.emscripten_bind_CvrWasm_SetDuplicateForgetTime(n,Number(r),t.duplicateForgetTime[r]);mr(r,{success:!0,result:e})}catch(e){Ir(r,e)}}),cvr_getDuplicateForgetTime:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{e=wt.emscripten_bind_CvrWasm_GetDuplicateForgetTime(n,t.type),mr(r,{success:!0,time:e})}catch(e){Ir(r,e)}}),cvr_setResultCrossVerificationCriteria:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{for(let r in t.criteria){const i=t.criteria[r];e=wt.emscripten_bind_CvrWasm_SetResultCrossVerificationCriteria(n,Number(r),i.frameWindow,i.minConsistentFrames)}mr(r,{success:!0,result:e})}catch(e){Ir(r,e)}}),cvr_containsTask:(t,r,n)=>e(void 0,void 0,void 0,function*(){try{ur();const e=UTF8ToString(wt.emscripten_bind_CvrWasm_ContainsTask(n,fr(t.templateName)));mr(r,{success:!0,tasks:e})}catch(e){Ir(r,e)}}),cvr_dispose:(t,r,n)=>e(void 0,void 0,void 0,function*(){try{rr.delete(n),wt.emscripten_bind_CvrWasm___destroy___(n),mr(r,{success:!0})}catch(e){Ir(r,e)}}),cvr_getWasmFilterState:(t,r,n)=>e(void 0,void 0,void 0,function*(){let e;try{e=UTF8ToString(wt.emscripten_bind_CvrWasm_GetFilterState(n)),mr(r,{success:!0,response:e})}catch(e){Ir(r,e)}})}),Object.assign(Nr,{license_dynamsoft:(t,r)=>e(void 0,void 0,void 0,function*(){try{let n,i=t.l,s=t.brtk,o=()=>e(void 0,void 0,void 0,function*(){Wt=Wt||et({dm:Bt,log:pr,bd:er}),self.scsd=Wt.s,t.pd="",t.v="0."+t.v,t.updl=Ur,t.mnet=Fr,t.mxet=Br,yield Wt.i(t)}),a=()=>e(void 0,void 0,void 0,function*(){if(i.startsWith("DLC2"))Wt=Wt||et({dm:Bt,log:pr,bd:er}),yield Wt.i2({updl:Ur,mxet:Br,strDLC2:i});else{let e={pk:i,dm:Bt};er&&(e.bd=!0),yield Ur(e)}});if(s?yield o():yield a(),Zt=t._e,Ht.mli&&t.mliRecord){Ft=Zt?yield(async(e,t)=>{const r=atob(e),n=new Uint8Array(r.length);for(let e=0;e<r.length;e++)n[e]=r.charCodeAt(e);const i=n.slice(0,12),s=n.slice(12),o=new TextEncoder,a=await crypto.subtle.importKey("raw",o.encode(t),"PBKDF2",!1,["deriveKey"]),_=await crypto.subtle.deriveKey({name:"PBKDF2",salt:o.encode("salt-for-key-derivation"),iterations:1e5,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),c=await crypto.subtle.decrypt({name:"AES-GCM",iv:i,tagLength:128},_,s);return(new TextDecoder).decode(c)})(t.mliRecord,ir):t.mliRecord,Ft=JSON.parse(Ft);for(let e in Ft)if($t[e])for(let t in Ft[e])$t[e][t].used=Ft[e][t].used}mr(r,{trial:Ht.trial,ltsErrorCode:n,message:Ht.msg,initLicenseInfo:Vt,bSupportDce4Module:wt.emscripten_bind_CoreWasm_static_GetIsSupportDceModule(),bSupportIRTModule:wt.emscripten_bind_CoreWasm_static_GetIsSupportIRTModule()})}catch(e){Ir(r,e)}}),license_getDeviceUUID:(t,r)=>e(void 0,void 0,void 0,function*(){try{Wt=Wt||et({dm:Bt,log:pr,bd:er});let e=yield Wt.u();mr(r,{uuid:e})}catch(e){Ir(r,e)}}),license_getAR:(t,r)=>e(void 0,void 0,void 0,function*(){try{if(Wt){let e={u:yield Wt.u(),pt:Wt.pt()},t=Wt.ar();t&&(e.ar=t);let n=Wt.ae();n&&(e.lem=n.message,e.lec=n.ltsErrorCode),mr(r,e)}else mr(r,null)}catch(e){Ir(r,e)}})}),Object.assign(Nr,{dlr_loadData:(t,r)=>e(void 0,void 0,void 0,function*(){try{Or(t.type,t.dataName,t.dataPath);let e=yield ar[t.dataName];mr(r,{success:!0,result:e})}catch(e){return void Ir(r,e)}})}),Object.assign(Nr,{ddn_setThresholdValue:(t,r,n)=>e(void 0,void 0,void 0,function*(){try{const e=wt.emscripten_bind_DdnWasm(n);wt.emscripten_bind_DdnWasm_setThresholdValue(e,t.threshold,t.leftLimit,t.rightLimit),mr(r,{success:!0})}catch(e){return void Ir(r,e)}})}),Object.assign(Nr,{dcp_appendResourceBuffer:(t,r)=>e(void 0,void 0,void 0,function*(){try{for(let e of t.specificationNames)Sr(e,t.specificationPath);const e=yield Promise.all(Object.values(cr)),n=e.filter(e=>0!==e.errorCode)[0];mr(r,{success:!0,result:n||e[0]})}catch(e){return void Ir(r,e)}}),dcp_createInstance:(t,r)=>e(void 0,void 0,void 0,function*(){try{let e=wt.emscripten_bind_DcpWasm_CreateInstance();mr(r,{instanceID:e})}catch(e){return void Ir(r,e)}}),dcp_dispose:(t,r,n)=>e(void 0,void 0,void 0,function*(){try{wt.emscripten_bind_DcpWasm___destroy___(n),mr(r,{success:!0})}catch(e){Ir(r,e)}}),dcp_initSettings:(t,r,n)=>e(void 0,void 0,void 0,function*(){try{ur();let e=UTF8ToString(wt.emscripten_bind_DcpWasm_InitSettings(n,fr(t.settings)));mr(r,{success:!0,response:e})}catch(e){return void Ir(r,e)}}),dcp_resetSettings:(t,r,n)=>e(void 0,void 0,void 0,function*(){try{wt.emscripten_bind_DcpWasm_ResetSettings(n),mr(r,{success:!0})}catch(e){return void Ir(r,e)}}),dcp_parse:(t,r,n)=>e(void 0,void 0,void 0,function*(){try{ur();let e=UTF8ToString(wt.emscripten_bind_DcpWasm_Parse(n,yr(t.source,0),t.source.length,fr(t.taskSettingName)));"parse failed."===e&&(e=JSON.stringify({errorCode:!0,errorString:"parse failed."})),mr(r,{success:!0,parseResponse:e})}catch(e){return void Ir(r,e)}})}),Object.assign(Nr,{utility_drawOnImage:(t,r)=>e(void 0,void 0,void 0,function*(){try{let e=wt.emscripten_bind_Create_CImageData(t.dsImage.bytes.length,yr(t.dsImage.bytes,0),t.dsImage.width,t.dsImage.height,t.dsImage.stride,t.dsImage.format,0);const n=t.type.charAt(0).toUpperCase()+t.type.slice(1);ur();const i=wt[`emscripten_bind_UtilityWasm_DrawOnImage${n}`](e,fr(JSON.stringify(t.drawingItem)),t.drawingItem.length,t.color,t.thickness),s=JSON.parse(UTF8ToString(wasmExports.emscripten_bind_CoreWasm_ResolveImageData(i)));kr(s),wt.emscripten_bind_Destory_CImageData(s),wt.emscripten_bind_Destory_CImageData(e),postMessage({type:"task",id:r,body:{success:!0,image:s}},[s.bytes.buffer])}catch(e){return void Ir(r,e)}}),utility_cropImage:(t,r)=>e(void 0,void 0,void 0,function*(){try{const e=wt.emscripten_bind_Create_CImageData(t.bytes.length,yr(t.bytes,0),t.width,t.height,t.stride,t.format,0);ur();const n=wt[`emscripten_bind_UtilityWasm_CropImageFrom${t.type}`](e,fr(JSON.stringify(t.roi))),i=JSON.parse(UTF8ToString(wasmExports.emscripten_bind_CoreWasm_ResolveImageData(n)));kr(i),wt.emscripten_bind_Destory_CImageData(n),wt.emscripten_bind_Destory_CImageData(e),postMessage({type:"task",id:r,body:{success:!0,cropImage:i}},[i.bytes.buffer])}catch(e){return void Ir(r,e)}}),utility_adjustBrightness:(t,r)=>e(void 0,void 0,void 0,function*(){try{const e=wt.emscripten_bind_Create_CImageData(t.bytes.length,yr(t.bytes,0),t.width,t.height,t.stride,t.format,0),n=wt.emscripten_bind_UtilityWasm_AdjustBrightness(e,t.brightness),i=JSON.parse(UTF8ToString(wasmExports.emscripten_bind_CoreWasm_ResolveImageData(n)));kr(i),wt.emscripten_bind_Destory_CImageData(e),wt.emscripten_bind_Destory_CImageData(n),postMessage({type:"task",id:r,body:{success:!0,adjustBrightness:i}},[i.bytes.buffer])}catch(e){return void Ir(r,e)}}),utility_adjustContrast:(t,r)=>e(void 0,void 0,void 0,function*(){try{const e=wt.emscripten_bind_Create_CImageData(t.bytes.length,yr(t.bytes,0),t.width,t.height,t.stride,t.format,0),n=wt.emscripten_bind_UtilityWasm_AdjustContrast(e,t.contrast),i=JSON.parse(UTF8ToString(wasmExports.emscripten_bind_CoreWasm_ResolveImageData(n)));kr(i),wt.emscripten_bind_Destory_CImageData(n),wt.emscripten_bind_Destory_CImageData(e),postMessage({type:"task",id:r,body:{success:!0,adjustContrast:i}},[i.bytes.buffer])}catch(e){return void Ir(r,e)}}),utility_filterImage:(t,r)=>e(void 0,void 0,void 0,function*(){try{const e=wt.emscripten_bind_Create_CImageData(t.bytes.length,yr(t.bytes,0),t.width,t.height,t.stride,t.format,0),n=wt.emscripten_bind_UtilityWasm_FilterImage(e,t.filterType),i=JSON.parse(UTF8ToString(wasmExports.emscripten_bind_CoreWasm_ResolveImageData(n)));kr(i),wt.emscripten_bind_Destory_CImageData(n),wt.emscripten_bind_Destory_CImageData(e),postMessage({type:"task",id:r,body:{success:!0,filterImage:i}},[i.bytes.buffer])}catch(e){return void Ir(r,e)}}),utility_convertToGray:(t,r)=>e(void 0,void 0,void 0,function*(){try{const e=wt.emscripten_bind_Create_CImageData(t.bytes.length,yr(t.bytes,0),t.width,t.height,t.stride,t.format,0),n=wt.emscripten_bind_UtilityWasm_ConvertToGray(e,t.R,t.G,t.B),i=JSON.parse(UTF8ToString(wasmExports.emscripten_bind_CoreWasm_ResolveImageData(n)));kr(i),wt.emscripten_bind_Destory_CImageData(n),wt.emscripten_bind_Destory_CImageData(e),postMessage({type:"task",id:r,body:{success:!0,convertToGray:i}},[i.bytes.buffer])}catch(e){return void Ir(r,e)}}),utility_convertToBinaryGlobal:(t,r)=>e(void 0,void 0,void 0,function*(){try{const e=wt.emscripten_bind_Create_CImageData(t.bytes.length,yr(t.bytes,0),t.width,t.height,t.stride,t.format,0),n=wt.emscripten_bind_UtilityWasm_ConvertToBinaryGlobal(e,t.threshold,t.invert),i=JSON.parse(UTF8ToString(wt.emscripten_bind_CoreWasm_ResolveImageData(n)));kr(i),wt.emscripten_bind_Destory_CImageData(n),wt.emscripten_bind_Destory_CImageData(e),postMessage({type:"task",id:r,body:{success:!0,convertToBinaryGlobal:i}},[i.bytes.buffer])}catch(e){return void Ir(r,e)}}),utility_convertToBinaryLocal:(t,r)=>e(void 0,void 0,void 0,function*(){try{const e=wt.emscripten_bind_Create_CImageData(t.bytes.length,yr(t.bytes,0),t.width,t.height,t.stride,t.format,0),n=wt.emscripten_bind_UtilityWasm_ConvertToBinaryLocal(e,t.blockSize,t.compensation,t.invert),i=JSON.parse(UTF8ToString(wt.emscripten_bind_CoreWasm_ResolveImageData(n)));kr(i),wt.emscripten_bind_Destory_CImageData(n),wt.emscripten_bind_Destory_CImageData(e),postMessage({type:"task",id:r,body:{success:!0,convertToBinaryLocal:i}},[i.bytes.buffer])}catch(e){return void Ir(r,e)}}),utility_cropAndDeskewImage:(t,r)=>e(void 0,void 0,void 0,function*(){try{const e=wt.emscripten_bind_Create_CImageData(t.bytes.length,yr(t.bytes,0),t.width,t.height,t.stride,t.format,0);ur();const n=wt.emscripten_bind_UtilityWasm_CropAndDeskewImage(e,fr(JSON.stringify(t.roi)),t.dstWidth,t.dstHeight,t.padding),i=JSON.parse(UTF8ToString(wt.emscripten_bind_CoreWasm_ResolveImageData(n)));kr(i),wt.emscripten_bind_Destory_CImageData(n),wt.emscripten_bind_Destory_CImageData(e),postMessage({type:"task",id:r,body:{success:!0,cropAndDeskewImage:i}},[i.bytes.buffer])}catch(e){return void Ir(r,e)}})}),Object.assign(Nr,{identityUtility_findPortraitZone:(t,r,n)=>e(void 0,void 0,void 0,function*(){try{const e=UTF8ToString(wt.emscripten_bind_IdentityUtilityWasm_FindPortraitZone());mr(r,{success:!0,quad:e})}catch(e){return void Ir(r,e)}})}),addEventListener("message",e=>{const t=e.data?e.data:e,r=t.body,n=t.id,i=t.instanceID,s=Nr[t.type];s&&s(r,n,i)});const Rr=(t,r)=>{qt||nr[t]||(nr[t]=e(void 0,void 0,void 0,function*(){try{let e=0,n=`${r}${t}.data`;const i=yield new Promise((i,s)=>{const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onload=()=>{o.status<200||o.status>=300?i({ok:!1,status:o.status}):i({ok:!0,arrayBuffer:()=>o.response})},o.onerror=o.onabort=()=>{s({ok:!1,status:o.status})},o.onloadstart=()=>{postMessage({type:"event",id:-2,body:{loaded:0,total:e||0,tag:"starting",resourcesPath:r+t+".data"}})},o.onloadend=()=>{postMessage({type:"event",id:-2,body:{loaded:e||0,total:e||0,tag:"completed",resourcesPath:r+t+".data"}})};let a=Date.now();o.onprogress=t=>{if(t.lengthComputable&&(e=t.total),e){const r=Date.now();a+500<r&&(postMessage({type:"event",id:-2,body:{total:e,loaded:t.loaded,tag:"in progress",resourcesPath:n}}),a=r)}},o.open("GET",n,!0),o.send()});if(!i.ok)return Promise.reject(new Error(`[${w.EC_MODEL_FILE_NOT_FOUND}]: Model file not found.`));const s=yield i.arrayBuffer(),o=new Uint8Array(s);return ur(),UTF8ToString(wt.emscripten_bind_CvrWasm_AppendDLModelBuffer(fr(t),yr(o,0),o.length,1))}catch(e){return delete nr[t],Promise.reject(new Error(e))}}))},Or=(t,r,n)=>{if(!ar[r]){let i={ConfusableChars:5561,OverLappingChars:486901}[r];ar[r]=e(void 0,void 0,void 0,function*(){try{let e;const s=n+r+".data",o=yield new Promise((e,t)=>{const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onload=()=>{o.status<200||o.status>=300?e({ok:!1,status:o.status}):e({ok:!0,arrayBuffer:()=>o.response})},o.onerror=o.onabort=()=>{t({ok:!1,status:o.status})},o.onloadstart=()=>{postMessage({type:"event",id:-1,body:{loaded:0,total:i||0,tag:"starting",resourcesPath:n+r+".data"}})},o.onloadend=()=>{postMessage({type:"event",id:-1,body:{loaded:i||0,total:i||0,tag:"completed",resourcesPath:n+r+".data"}})};let a=Date.now();o.onprogress=e=>{if(e.lengthComputable&&(i=e.total),i){const t=Date.now();a+500<t&&(postMessage({type:"event",id:-1,body:{total:i,loaded:e.loaded,tag:"in progress",resourcesPath:s}}),a=t)}},o.open("GET",s,!0),o.send()});if(!o.ok)return Promise.reject(new Error(`[${w.EC_FILE_NOT_FOUND}]: The specified file could not be found.`));e=yield o.arrayBuffer();const a=new Uint8Array(e);let _;return ur(),"confusable"===t?_=UTF8ToString(wt.emscripten_bind_DlrWasm_AppendConfusableCharactersBuffer(fr(r),yr(a,0),a.length)):"overlapping"===t&&(_=UTF8ToString(wt.emscripten_bind_DlrWasm_AppendOverLappingCharactersBuffer(fr(r),yr(a,0),a.length))),_}catch(e){return delete ar[r],Promise.reject(new Error(e))}})}},Sr=(t,r)=>{t=t.toUpperCase(),cr[t]||(cr[t]=e(void 0,void 0,void 0,function*(){try{let e,n=r+t+".data",i=0,s=Date.now();try{e=yield g(n,"arraybuffer",{loadstartCallback:()=>{postMessage({type:"event",id:-4,body:{loaded:0,total:i||0,tag:"starting",resourcesPath:n}})},progressCallback:e=>{if(e.lengthComputable&&(i=e.total),i){const t=Date.now();s+500<t&&(postMessage({type:"event",id:-4,body:{total:i,loaded:e.loaded,tag:"in progress",resourcesPath:n}}),s=t)}}})}catch(e){if("number"==typeof e)throw new Error(`[${w.EC_FILE_NOT_FOUND}]: The specified file could not be found.`)}const o=new Uint8Array(e);ur();const a=UTF8ToString(wt.emscripten_bind_DcpWasm_AppendResourceBuffer(fr(t),yr(o),o.length));return postMessage({type:"event",id:-4,body:{loaded:i||0,total:i||0,tag:"completed",resourcesPath:n}}),JSON.parse(a)}catch(e){return delete cr[t],Promise.reject(e)}}))},Dr=(t,r)=>e(void 0,void 0,void 0,function*(){ur();const e=JSON.parse(UTF8ToString(wt.emscripten_bind_CvrWasm_ParseRequiredResources(t,fr(r.templateName))));for(let t=0;t<e.models.length;t++)Rr(e.models[t],Jt+"models/");for(let t=0;t<e.specss.length;t++)Sr(e.specss[t],Jt+"parser-resources/");yield Promise.all([...Object.values(nr),...Object.values(cr)])}),br=(t,r)=>e(void 0,void 0,void 0,function*(){ur();UTF8ToString(wt.emscripten_bind_CvrWasm_ContainsTask(t,fr(r.templateName))).includes("dlr")&&(Or("confusable","ConfusableChars",Jt+"char-resources/"),Or("overlapping","OverlappingChars",Jt+"char-resources/"),yield Promise.all(Object.values(ar)))}),Ar=e=>{for(let t of e)if(t.result)if([x.IRUT_CONTOURS].includes(BigInt(t.result.unitType))){let e=t.result.contours,r=t.result.contoursOffset;if(e&&r){e=new Uint8Array(new Uint8Array(HEAP8.buffer,e.ptr,e.length)),r=new Uint8Array(new Uint8Array(HEAP8.buffer,r.ptr,r.length));const n=new DataView(e.buffer),i=[];for(let t=0;t<e.length;t+=4)i.push(n.getInt32(t,!0));const s=new DataView(r.buffer),o=[0];for(let e=0;e<r.length;e+=4)o.push(s.getInt32(e,!0));const a=[];for(let e=0;e<o.length-1;e++){const t={points:[]};for(let r=o[e];r<o[e+1]-1;r+=2)t.points.push({x:i[r],y:i[r+1]});a.push(t)}t.result.contours=a,delete t.result.contoursOffset}}else if([x.IRUT_LINE_SEGMENTS].includes(BigInt(t.result.unitType))){let e=t.result.lineSegments;if(e){e=new Uint8Array(new Uint8Array(HEAP8.buffer,e.ptr,e.length));const r=new DataView(e.buffer),n=[];for(let t=0;t<e.length;t+=4)n.push(r.getInt32(t,!0));const i=[];for(let e=0;e<n.length;e+=4){const t={startPoint:{x:n[e],y:n[e+1]},endPoint:{x:n[e+2],y:n[e+3]}};i.push(t)}t.result.lineSegments=i}}else if([x.IRUT_LOGIC_LINES].includes(BigInt(t.result.unitType))){let e=t.result.logicLines;if(e){e=new Uint8Array(new Uint8Array(HEAP8.buffer,e.ptr,e.length));const r=new DataView(e.buffer),n=[];for(let t=0;t<e.length;t+=4)n.push(r.getInt32(t,!0));const i=[];for(let e=0;e<n.length;e+=4){const t={startPoint:{x:n[e],y:n[e+1]},endPoint:{x:n[e+2],y:n[e+3]}};i.push(t)}t.result.logicLines=i}}else if([x.IRUT_SHORT_LINES].includes(BigInt(t.result.unitType))){let e=t.result.shortLines;if(e){e=new Uint8Array(new Uint8Array(HEAP8.buffer,e.ptr,e.length));const r=new DataView(e.buffer),n=[];for(let t=0;t<e.length;t+=4)n.push(r.getInt32(t,!0));const i=[];for(let e=0;e<n.length;e+=4){const t={startPoint:{x:n[e],y:n[e+1]},endPoint:{x:n[e+2],y:n[e+3]}};i.push(t)}t.result.shortLines=i}}else if([x.IRUT_CANDIDATE_QUAD_EDGES].includes(BigInt(t.result.unitType))){let e=t.result.candidateQuadEdges;if(e){e=new Uint8Array(new Uint8Array(HEAP8.buffer,e.ptr,e.length));const r=new DataView(e.buffer),n=[];for(let t=0;t<e.length;t+=4)n.push(r.getInt32(t,!0));const i=[];for(let e=0;e<n.length;e+=22){const t={startCorner:{intersection:{x:n[e],y:n[e+1]},line1:{startPoint:{x:n[e+2],y:n[e+3]},endPoint:{x:n[e+4],y:n[e+5]}},line2:{startPoint:{x:n[e+6],y:n[e+7]},endPoint:{x:n[e+8],y:n[e+9]}},type:n[e+10]},endCorner:{intersection:{x:n[e+11],y:n[e+12]},line1:{startPoint:{x:n[e+13],y:n[e+14]},endPoint:{x:n[e+15],y:n[e+16]}},line2:{startPoint:{x:n[e+17],y:n[e+18]},endPoint:{x:n[e+19],y:n[e+20]}},type:n[e+21]}};i.push(t)}t.result.candidateQuadEdges=i}}else if([x.IRUT_CORNERS].includes(BigInt(t.result.unitType))){let e=t.result.corners;if(e){e=new Uint8Array(new Uint8Array(HEAP8.buffer,e.ptr,e.length));const r=new DataView(e.buffer),n=[];for(let t=0;t<e.length;t+=4)n.push(r.getInt32(t,!0));const i=[];for(let e=0;e<n.length;e+=11){const t={intersection:{x:n[e],y:n[e+1]},line1:{startPoint:{x:n[e+2],y:n[e+3]},endPoint:{x:n[e+4],y:n[e+5]}},line2:{startPoint:{x:n[e+6],y:n[e+7]},endPoint:{x:n[e+8],y:n[e+9]}},type:n[e+10]};i.push(t)}t.result.corners=i}}},Lr=e=>{e:for(let t in $t)for(let r in $t[t])if(r===e){$t[t][r].used++;break e}},Mr=e=>e&at||e&gt||e&dt||e&St||e&Dt?"1":e&Et||e&It?"2":e&lt||e&pt?"3":e&ut?"4":e&ft?"5":e&mt?"6":e&ct?"7":e&_t?"8":e&Ct?"9":e&Tt||e&ht?"10":e&vt?"11":e&yt?"16":e&Nt||e&Rt||e&Ot?"17":void 0,wr=t=>e(void 0,void 0,void 0,function*(){if(Ht.mli){for(let e of t.items)e.type!==L.CRIT_ORIGINAL_IMAGE&&e.type===L.CRIT_BARCODE&&Lr(Mr(e.format));(()=>{let e=!1;const t={};for(let e in $t)for(let r in $t[e])t[r]?(t[r].total+=$t[e][r].total,t[r].used+=$t[e][r].used):t[r]=$t[e][r];for(let r in t)t[r].used>=t[r].total&&(zt.includes(r)||zt.push(r),e=!0);for(let e in $t)for(let t in $t[e])zt.includes(t)&&($t[e][t].total=0,$t[e][t].used=0);return e})()&&(Ht.om?(Ht.om.push(...zt),Ht.om=[...new Set(Ht.om)]):Ht.om=zt,yield Wt.glfd(!0,{om:Ht.om,ic:Ht.ic}),yield Wt.caul(),zt=[])}}),Pr=()=>e(void 0,void 0,void 0,function*(){let e;if(Ft){const t=JSON.parse(JSON.stringify($t));for(let e in Ft)t[e]||(t[e]=Ft[e]);e=t}else e=$t;return e=Zt?yield(async(e,t)=>{const r=new TextEncoder,n=await crypto.subtle.importKey("raw",r.encode(t),"PBKDF2",!1,["deriveKey"]),i=await crypto.subtle.deriveKey({name:"PBKDF2",salt:r.encode("salt-for-key-derivation"),iterations:1e5,hash:"SHA-256"},n,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),s=crypto.getRandomValues(new Uint8Array(12)),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:s,tagLength:128},i,r.encode(e)),a=new Uint8Array(s.length+o.byteLength);return a.set(s),a.set(new Uint8Array(o),s.length),btoa(String.fromCharCode.apply(null,a))})(JSON.stringify(e),ir):JSON.stringify(e),e}),Ur=t=>e(void 0,void 0,void 0,function*(){if(yield gr("core"),t.mli)for(let e in t.mli){$t.hasOwnProperty(e)||($t[e]={});const r=t.mli[e];for(let t=2;t<r.length;t++)$t[e][r[t]]?$t[e][r[t]].total+=r[1]:$t[e][r[t]]={total:r[1],used:0}}t.mlo&&(t.mlo=JSON.stringify(t.mlo)),Ht=t,ur(),Vt=JSON.parse(UTF8ToString(wt.emscripten_bind_CoreWasm_static_init(fr(JSON.stringify(t)))))}),Fr=()=>{let e=wt.getMinExpireTime;return e?e():null},Br=()=>{let e=wt.getMaxExpireTime;return e?e():null},Gr=()=>e(void 0,void 0,void 0,function*(){}),kr=e=>{let t=e.bytes;t&&(t=new Uint8Array(new Uint8Array(HEAP8.buffer,t.ptr,t.length)),e.bytes=t)}}();
